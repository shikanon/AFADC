# API æ¥å£æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [API æ¥å£æ–‡æ¡£](#api-æ¥å£æ–‡æ¡£)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [åŸºç¡€ä¿¡æ¯](#åŸºç¡€ä¿¡æ¯)
  - [1. è®¤è¯æ¨¡å—](#1-è®¤è¯æ¨¡å—)
    - [1.1 ç”¨æˆ·æ³¨å†Œ](#11-ç”¨æˆ·æ³¨å†Œ)
    - [1.2 ç”¨æˆ·ç™»å½•](#12-ç”¨æˆ·ç™»å½•)
    - [1.3 è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯](#13-è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯)
  - [2. ç”¨æˆ·ç®¡ç†æ¨¡å—](#2-ç”¨æˆ·ç®¡ç†æ¨¡å—)
    - [2.1 è·å–ç”¨æˆ·åˆ—è¡¨](#21-è·å–ç”¨æˆ·åˆ—è¡¨)
    - [2.2 åˆ›å»ºç”¨æˆ·](#22-åˆ›å»ºç”¨æˆ·)
    - [2.3 æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯](#23-æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯)
    - [2.4 åˆ é™¤ç”¨æˆ·](#24-åˆ é™¤ç”¨æˆ·)
  - [3. é¡¹ç›®ç®¡ç†æ¨¡å—](#3-é¡¹ç›®ç®¡ç†æ¨¡å—)
    - [3.1 è·å–é¡¹ç›®åˆ—è¡¨](#31-è·å–é¡¹ç›®åˆ—è¡¨)
    - [3.2 åˆ›å»ºé¡¹ç›®](#32-åˆ›å»ºé¡¹ç›®)
    - [3.3 è·å–é¡¹ç›®è¯¦æƒ…](#33-è·å–é¡¹ç›®è¯¦æƒ…)
    - [3.4 æ›´æ–°é¡¹ç›®](#34-æ›´æ–°é¡¹ç›®)
    - [3.5 åˆ é™¤é¡¹ç›®](#35-åˆ é™¤é¡¹ç›®)
  - [4. åœºæ™¯ç®¡ç†æ¨¡å—](#4-åœºæ™¯ç®¡ç†æ¨¡å—)
    - [4.1 è·å–åœºæ™¯åˆ—è¡¨](#41-è·å–åœºæ™¯åˆ—è¡¨)
  - [5. ç« èŠ‚ç®¡ç†](#5-ç« èŠ‚ç®¡ç†)
    - [5.1 è·å–ç« èŠ‚åˆ—è¡¨](#51-è·å–ç« èŠ‚åˆ—è¡¨)
    - [5.2 åˆ›å»ºç« èŠ‚](#52-åˆ›å»ºç« èŠ‚)
    - [5.3 æ›´æ–°ç« èŠ‚](#53-æ›´æ–°ç« èŠ‚)
    - [5.4 åˆ é™¤ç« èŠ‚](#54-åˆ é™¤ç« èŠ‚)
    - [5.5 æ‹†åˆ†ç« èŠ‚ä¸ºåˆ†é•œ](#55-æ‹†åˆ†ç« èŠ‚ä¸ºåˆ†é•œ)
  - [6. åˆ†é•œç®¡ç†](#6-åˆ†é•œç®¡ç†)
    - [6.1 è·å–åˆ†é•œåˆ—è¡¨](#61-è·å–åˆ†é•œåˆ—è¡¨)
    - [6.2 æ›´æ–°åˆ†é•œ](#62-æ›´æ–°åˆ†é•œ)
    - [6.3 ç”Ÿæˆåˆ†é•œå›¾ç‰‡](#63-ç”Ÿæˆåˆ†é•œå›¾ç‰‡)
    - [6.4 ç”Ÿæˆåˆ†é•œå…³é”®å¸§](#64-ç”Ÿæˆåˆ†é•œå…³é”®å¸§)
    - [6.5 ç”Ÿæˆåˆ†é•œè§†é¢‘](#65-ç”Ÿæˆåˆ†é•œè§†é¢‘)
  - [7. è§’è‰²ç®¡ç†æ¨¡å—](#7-è§’è‰²ç®¡ç†æ¨¡å—)
    - [7.1 è·å–è§’è‰²åˆ—è¡¨](#71-è·å–è§’è‰²åˆ—è¡¨)
    - [7.2 è·å–è§’è‰²è¯¦æƒ…](#72-è·å–è§’è‰²è¯¦æƒ…)
    - [7.3 åˆ›å»ºè§’è‰²](#73-åˆ›å»ºè§’è‰²)
    - [7.4 æ›´æ–°è§’è‰²](#74-æ›´æ–°è§’è‰²)
    - [7.5 åˆ é™¤è§’è‰²](#75-åˆ é™¤è§’è‰²)
    - [7.6 å°†è§’è‰²ç«‹ç»˜å¯¼å…¥ç´ æåº“](#76-å°†è§’è‰²ç«‹ç»˜å¯¼å…¥ç´ æåº“)
  - [8. ç´ æç®¡ç†æ¨¡å—](#8-ç´ æç®¡ç†æ¨¡å—)
    - [8.1 è·å–ç´ æåˆ—è¡¨](#81-è·å–ç´ æåˆ—è¡¨)
    - [8.2 åˆ›å»ºç´ æ](#82-åˆ›å»ºç´ æ)
    - [8.3 æ›´æ–°ç´ æ](#83-æ›´æ–°ç´ æ)
    - [8.4 åˆ é™¤ç´ æ](#84-åˆ é™¤ç´ æ)
  - [9. ä»»åŠ¡ç®¡ç†æ¨¡å—](#9-ä»»åŠ¡ç®¡ç†æ¨¡å—)
    - [9.1 è·å–ä»»åŠ¡åˆ—è¡¨](#91-è·å–ä»»åŠ¡åˆ—è¡¨)
    - [9.2 è·å–ä»»åŠ¡è¯¦æƒ…](#92-è·å–ä»»åŠ¡è¯¦æƒ…)
    - [9.3 åˆ›å»ºè‡ªå®šä¹‰ä»»åŠ¡](#93-åˆ›å»ºè‡ªå®šä¹‰ä»»åŠ¡)
    - [9.4 é‡è¯•ä»»åŠ¡](#94-é‡è¯•ä»»åŠ¡)
    - [9.5 åˆ›å»ºæ–‡ç”Ÿå›¾ä»»åŠ¡](#95-åˆ›å»ºæ–‡ç”Ÿå›¾ä»»åŠ¡)
    - [9.6 æ‰¹é‡ç”Ÿæˆè§’è‰²ç«‹ç»˜](#96-æ‰¹é‡ç”Ÿæˆè§’è‰²ç«‹ç»˜)
  - [10. å­˜å‚¨ç®¡ç†æ¨¡å—](#10-å­˜å‚¨ç®¡ç†æ¨¡å—)
    - [10.1 ä¸Šä¼ æ–‡ä»¶](#101-ä¸Šä¼ æ–‡ä»¶)
    - [10.2 è·å–é¢„ç­¾åURL](#102-è·å–é¢„ç­¾åurl)
  - [11. AIç”Ÿæˆæ¨¡å—](#11-aiç”Ÿæˆæ¨¡å—)
    - [11.1 æ–‡ç”Ÿå›¾](#111-æ–‡ç”Ÿå›¾)
    - [11.2 å›¾ç”Ÿå›¾](#112-å›¾ç”Ÿå›¾)
    - [11.3 æ–‡ç”Ÿè§†é¢‘](#113-æ–‡ç”Ÿè§†é¢‘)
    - [11.4 å›¾ç”Ÿè§†é¢‘](#114-å›¾ç”Ÿè§†é¢‘)
  - [12. AIä»£ç†æ¨¡å—](#12-aiä»£ç†æ¨¡å—)
    - [12.1 è¿è¡Œå·¥ä½œæµ](#121-è¿è¡Œå·¥ä½œæµ)
    - [12.2 æ‰¹é‡ç”Ÿæˆè§’è‰²](#122-æ‰¹é‡ç”Ÿæˆè§’è‰²)
  - [13. é€šçŸ¥æ¨¡å—](#13-é€šçŸ¥æ¨¡å—)
    - [13.1 è·å–é€šçŸ¥åˆ—è¡¨](#131-è·å–é€šçŸ¥åˆ—è¡¨)
    - [13.2 æ ‡è®°é€šçŸ¥å·²è¯»](#132-æ ‡è®°é€šçŸ¥å·²è¯»)
  - [14. å¥—é¤ç®¡ç†æ¨¡å—](#14-å¥—é¤ç®¡ç†æ¨¡å—)
    - [14.1 è·å–å¥—é¤åˆ—è¡¨](#141-è·å–å¥—é¤åˆ—è¡¨)
    - [14.2 åˆ›å»ºå¥—é¤](#142-åˆ›å»ºå¥—é¤)
    - [14.3 è·å–å¥—é¤è¯¦æƒ…](#143-è·å–å¥—é¤è¯¦æƒ…)
    - [14.4 æ›´æ–°å¥—é¤](#144-æ›´æ–°å¥—é¤)
    - [14.5 åˆ é™¤å¥—é¤](#145-åˆ é™¤å¥—é¤)
    - [14.6 è®¢é˜…å¥—é¤](#146-è®¢é˜…å¥—é¤)
  - [15. æ”¯ä»˜æ¨¡å—](#15-æ”¯ä»˜æ¨¡å—)
    - [15.1 åˆ›å»ºå¾®ä¿¡æ”¯ä»˜è®¢å•](#151-åˆ›å»ºå¾®ä¿¡æ”¯ä»˜è®¢å•)
    - [15.2 æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€](#152-æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€)
    - [15.3 å¾®ä¿¡æ”¯ä»˜å›è°ƒ](#153-å¾®ä¿¡æ”¯ä»˜å›è°ƒ)
  - [16. è®¾ç½®æ¨¡å—](#16-è®¾ç½®æ¨¡å—)
    - [16.1 è·å–APIå¯†é’¥åˆ—è¡¨](#161-è·å–apiå¯†é’¥åˆ—è¡¨)
    - [16.2 åˆ›å»ºAPIå¯†é’¥](#162-åˆ›å»ºapiå¯†é’¥)
    - [16.3 æ›´æ–°APIå¯†é’¥](#163-æ›´æ–°apiå¯†é’¥)
    - [16.4 åˆ é™¤APIå¯†é’¥](#164-åˆ é™¤apiå¯†é’¥)
  - [17. è¯­éŸ³åˆæˆæ¨¡å—](#17-è¯­éŸ³åˆæˆæ¨¡å—)
    - [17.1 è·å–éŸ³è‰²åˆ—è¡¨](#171-è·å–éŸ³è‰²åˆ—è¡¨)
    - [17.2 æ–‡æœ¬è½¬è¯­éŸ³](#172-æ–‡æœ¬è½¬è¯­éŸ³)
  - [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
    - [UserRead](#userread)
    - [ProjectRead](#projectread)
    - [ChapterRead](#chapterread)
    - [CharacterRead](#characterread)
    - [AssetRead](#assetread)
    - [TaskRead](#taskread)
  - [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
    - [é”™è¯¯å“åº”æ ¼å¼](#é”™è¯¯å“åº”æ ¼å¼)
    - [HTTPçŠ¶æ€ç ](#httpçŠ¶æ€ç )
    - [å¸¸è§é”™è¯¯ç¤ºä¾‹](#å¸¸è§é”™è¯¯ç¤ºä¾‹)
  - [é™„å½•](#é™„å½•)
    - [é¡¹ç›®ç±»å‹ (ProjectType)](#é¡¹ç›®ç±»å‹-projecttype)
    - [é¡¹ç›®çŠ¶æ€ (ProjectStatus)](#é¡¹ç›®çŠ¶æ€-projectstatus)
    - [ç´ æç±»å‹ (AssetType)](#ç´ æç±»å‹-assettype)
    - [ç´ æå­ç±»å‹ (AssetSubType)](#ç´ æå­ç±»å‹-assetsubtype)
    - [åˆ›å»ºæ–¹å¼ (CreationMethod)](#åˆ›å»ºæ–¹å¼-creationmethod)
    - [ä»»åŠ¡çŠ¶æ€ (TaskStatus)](#ä»»åŠ¡çŠ¶æ€-taskstatus)

---

## åŸºç¡€ä¿¡æ¯

- **Base URL**: `/api`
- **è®¤è¯æ–¹å¼**: Bearer Token
  - é€šè¿‡ `Authorization: Bearer <token>` header ä¼ é€’
  - Token é€šè¿‡ç™»å½•/æ³¨å†Œæ¥å£è·å–
- **Content-Type**: `application/json`
- **å­—ç¬¦ç¼–ç **: UTF-8

---

## 1. è®¤è¯æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/auth`

### 1.1 ç”¨æˆ·æ³¨å†Œ

åˆ›å»ºæ–°çš„ç»„ç»‡å’Œç®¡ç†å‘˜è´¦å·ã€‚

**è¯·æ±‚**

```http
POST /api/auth/register
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "email": "admin@example.com",
  "password": "password123",
  "organization_name": "æˆ‘çš„å…¬å¸",
  "display_name": "å¼ ä¸‰"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| email | string | æ˜¯ | é‚®ç®±åœ°å€,å¿…é¡»æ˜¯æœ‰æ•ˆæ ¼å¼ |
| password | string | æ˜¯ | å¯†ç ,è‡³å°‘6ä½ |
| organization_name | string | æ˜¯ | ç»„ç»‡åç§°,è‡³å°‘2ä¸ªå­—ç¬¦ |
| display_name | string | å¦ | æ˜¾ç¤ºåç§°,é»˜è®¤ä¸ºé‚®ç®±å‰ç¼€ |

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@example.com",
    "password": "password123",
    "organization_name": "æˆ‘çš„å…¬å¸",
    "display_name": "å¼ ä¸‰"
  }'
```

**å“åº”** (200)

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "username": "org1_admin",
    "display_name": "å¼ ä¸‰",
    "email": "admin@example.com",
    "phone": null,
    "role": "admin",
    "organization_id": 1,
    "is_active": true,
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

**é”™è¯¯ç **

- `400`: é‚®ç®±å·²è¢«æ³¨å†Œ / ç»„ç»‡åç§°ä¸ºç©º / å¯†ç å°‘äº6ä½

---

### 1.2 ç”¨æˆ·ç™»å½•

ä½¿ç”¨ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·ç™»å½•ã€‚

**è¯·æ±‚**

```http
POST /api/auth/login
Content-Type: application/x-www-form-urlencoded
```

**è¯·æ±‚ä½“** (OAuth2PasswordRequestForm)

```
username=admin@example.com&password=password123
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå· |
| password | string | æ˜¯ | å¯†ç  |

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin@example.com&password=password123"
```

**å“åº”** (200)

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "username": "org1_admin",
    "display_name": "å¼ ä¸‰",
    "email": "admin@example.com",
    "phone": null,
    "role": "admin",
    "organization_id": 1,
    "is_active": true,
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

**é”™è¯¯ç **

- `400`: è´¦å·ä¸èƒ½ä¸ºç©º / ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯

---

### 1.3 è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
GET /api/auth/me
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X GET http://localhost:8000/api/auth/me \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
{
  "id": 1,
  "username": "org1_admin",
  "display_name": "å¼ ä¸‰",
  "email": "admin@example.com",
  "phone": null,
  "role": "admin",
  "organization_id": 1,
  "is_active": true,
  "created_at": "2024-01-01T00:00:00Z"
}
```

**é”™è¯¯ç **

- `401`: æœªè®¤è¯æˆ– token æ— æ•ˆ

---

## 2. ç”¨æˆ·ç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/users`

æ‰€æœ‰æ¥å£å‡éœ€è¦è®¤è¯ã€‚

### 2.1 è·å–ç”¨æˆ·åˆ—è¡¨

è·å–ç»„ç»‡å†…çš„ç”¨æˆ·åˆ—è¡¨(ä»…ç®¡ç†å‘˜)ã€‚

**è¯·æ±‚**

```http
GET /api/users?page=1&size=20
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| page | integer | å¦ | 1 | é¡µç ,æœ€å°ä¸º1 |
| size | integer | å¦ | 20 | æ¯é¡µæ•°é‡,èŒƒå›´1-100 |

**curl ç¤ºä¾‹**

```bash
curl -X GET "http://localhost:8000/api/users?page=1&size=20" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "username": "org1_admin",
    "display_name": "å¼ ä¸‰",
    "email": "admin@example.com",
    "phone": null,
    "role": "admin",
    "organization_id": 1,
    "is_active": true,
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

**é”™è¯¯ç **

- `401`: æœªè®¤è¯
- `403`: æ— ç®¡ç†å‘˜æƒé™

---

### 2.2 åˆ›å»ºç”¨æˆ·

åˆ›å»ºæ–°ç”¨æˆ·(ä»…ç®¡ç†å‘˜)ã€‚

**è¯·æ±‚**

```http
POST /api/users
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "username": "user001",
  "display_name": "æå››",
  "email": "lisi@example.com",
  "phone": "13800138000",
  "role": "editor",
  "password": "password123"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å |
| display_name | string | å¦ | æ˜¾ç¤ºåç§° |
| email | string | å¦ | é‚®ç®±åœ°å€ |
| phone | string | å¦ | æ‰‹æœºå·,è‡³å°‘6ä½æ•°å­— |
| role | string | æ˜¯ | è§’è‰²,é»˜è®¤"editor" |
| password | string | æ˜¯ | å¯†ç  |

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/users \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "username": "user001",
    "display_name": "æå››",
    "email": "lisi@example.com",
    "phone": "13800138000",
    "role": "editor",
    "password": "password123"
  }'
```

**å“åº”** (201)

```json
{
  "id": 2,
  "username": "user001",
  "display_name": "æå››",
  "email": "lisi@example.com",
  "phone": "13800138000",
  "role": "editor",
  "organization_id": 1,
  "is_active": true,
  "created_at": "2024-01-02T00:00:00Z"
}
```

**é”™è¯¯ç **

- `400`: é‚®ç®±å·²è¢«å ç”¨ / æ‰‹æœºå·å·²è¢«å ç”¨ / æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®
- `403`: æ— ç®¡ç†å‘˜æƒé™

---

### 2.3 æ›´æ–°å½“å‰ç”¨æˆ·ä¿¡æ¯

æ›´æ–°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
PATCH /api/users/me
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "display_name": "å¼ ä¸‰ä¸°",
  "email": "zhangsan@example.com",
  "phone": "13900139000"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| display_name | string | å¦ | æ˜¾ç¤ºåç§°,æœ€å¤š150å­—ç¬¦ |
| email | string | å¦ | é‚®ç®±åœ°å€ |
| phone | string | å¦ | æ‰‹æœºå·,è‡³å°‘6ä½æ•°å­— |

**å“åº”** (200)

```json
{
  "id": 1,
  "username": "org1_admin",
  "display_name": "å¼ ä¸‰ä¸°",
  "email": "zhangsan@example.com",
  "phone": "13900139000",
  "role": "admin",
  "organization_id": 1,
  "is_active": true,
  "created_at": "2024-01-01T00:00:00Z"
}
```

**é”™è¯¯ç **

- `400`: è¯·è‡³å°‘å¡«å†™ä¸€é¡¹æ›´æ–°å†…å®¹ / é‚®ç®±å·²è¢«å ç”¨ / æ‰‹æœºå·å·²è¢«å ç”¨

---

### 2.4 åˆ é™¤ç”¨æˆ·

åˆ é™¤æŒ‡å®šç”¨æˆ·(ä»…ç®¡ç†å‘˜)ã€‚

**è¯·æ±‚**

```http
DELETE /api/users/{user_id}
Authorization: Bearer <token>
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| user_id | integer | ç”¨æˆ·ID |

**å“åº”** (204)

æ— å†…å®¹

**é”™è¯¯ç **

- `403`: æ— ç®¡ç†å‘˜æƒé™
- `404`: ç”¨æˆ·ä¸å­˜åœ¨

---

## 3. é¡¹ç›®ç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/projects`

### 3.1 è·å–é¡¹ç›®åˆ—è¡¨

è·å–ç»„ç»‡å†…çš„æ‰€æœ‰é¡¹ç›®ã€‚

**è¯·æ±‚**

```http
GET /api/projects?page=1&size=20&search=æµ‹è¯•
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| page | integer | å¦ | 1 | é¡µç ,æœ€å°ä¸º1 |
| size | integer | å¦ | 20 | æ¯é¡µæ•°é‡,èŒƒå›´1-100 |
| search | string | å¦ | - | æœç´¢å…³é”®è¯,æ¨¡ç³ŠåŒ¹é…é¡¹ç›®åç§° |

**curl ç¤ºä¾‹**

```bash
# è·å–ç¬¬ä¸€é¡µ,æ¯é¡µ20æ¡
curl -X GET "http://localhost:8000/api/projects?page=1&size=20" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# æœç´¢é¡¹ç›®
curl -X GET "http://localhost:8000/api/projects?search=æµ‹è¯•" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "name": "æµ‹è¯•é¡¹ç›®",
    "project_type": "static_comic",
    "status": "draft",
    "description": "é¡¹ç›®æè¿°",
    "cover_image": "http://localhost:8000/assets/project_cover.png",
    "video_scale": "16:9",
    "video_resolution": "720p",
    "prompt": "åˆ›ä½œä¸€éƒ¨æ¸©é¦¨æ²»æ„ˆçš„é™æ€æ¼«ç”»,ç”»é£æ¸…æ–°ç®€æ´,è‰²è°ƒä»¥æŸ”å’Œçš„æš–è‰²ä¸ºä¸»",
    "organization_id": 1,
    "created_by_id": 1,
    "created_by": {
      "id": 1,
      "username": "testuser",
      "display_name": "æµ‹è¯•ç”¨æˆ·"
    },
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

**å“åº”å­—æ®µè¯´æ˜**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | integer | é¡¹ç›®ID |
| name | string | é¡¹ç›®åç§° |
| project_type | string | é¡¹ç›®ç±»å‹ |
| status | string | é¡¹ç›®çŠ¶æ€ |
| description | string | é¡¹ç›®æè¿° |
| cover_image | string | å°é¢å›¾ç‰‡URL |
| video_scale | string | è§†é¢‘æ¯”ä¾‹(å¦‚16:9) |
| video_resolution | string | è§†é¢‘åˆ†è¾¨ç‡(å¦‚720p) |
| prompt | string | é¡¹ç›®åˆ›ä½œæç¤ºè¯,ç”¨äºæŒ‡å¯¼æ•´ä½“é£æ ¼å’Œåˆ›ä½œæ–¹å‘ |
| organization_id | integer | ç»„ç»‡ID |
| created_by_id | integer | åˆ›å»ºäººID |
| created_by | object | åˆ›å»ºäººä¿¡æ¯,åŒ…å«idã€usernameã€display_name |
| created_at | string | åˆ›å»ºæ—¶é—´(ISO 8601æ ¼å¼) |

---

### 3.2 åˆ›å»ºé¡¹ç›®

åˆ›å»ºæ–°é¡¹ç›®ã€‚

**è¯·æ±‚**

```http
POST /api/projects
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "name": "æˆ‘çš„ç¬¬ä¸€ä¸ªé¡¹ç›®",
  "project_type": "static_comic",
  "status": "draft",
  "description": "é¡¹ç›®æè¿°",
  "cover_image": "http://localhost:8000/assets/project_cover.png",
  "video_scale": "16:9",
  "video_resolution": "1080p",
  "prompt": "åˆ›ä½œä¸€éƒ¨æ¸©é¦¨æ²»æ„ˆçš„é™æ€æ¼«ç”»,ç”»é£æ¸…æ–°ç®€æ´,è‰²è°ƒä»¥æŸ”å’Œçš„æš–è‰²ä¸ºä¸»"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | æ˜¯ | é¡¹ç›®åç§° |
| project_type | string | æ˜¯ | é¡¹ç›®ç±»å‹: `static_comic`(é™æ€æ¼«) / `dynamic_comic`(åŠ¨æ€æ¼«) |
| status | string | å¦ | é¡¹ç›®çŠ¶æ€,é»˜è®¤`draft` |
| description | string | å¦ | é¡¹ç›®æè¿° |
| cover_image | string | å¦ | å°é¢å›¾ç‰‡URL |
| video_scale | string | å¦ | è§†é¢‘æ¯”ä¾‹,å¦‚: `16:9`, `4:3` |
| video_resolution | string | å¦ | è§†é¢‘åˆ†è¾¨ç‡,å¦‚: `720p`, `1080p`, `4K` |
| prompt | string | å¦ | é¡¹ç›®åˆ›ä½œæç¤ºè¯,ç”¨äºæŒ‡å¯¼æ•´ä½“é£æ ¼å’Œåˆ›ä½œæ–¹å‘ |

**é¡¹ç›®çŠ¶æ€æšä¸¾**

- `draft`: è‰ç¨¿
- `progress`: è¿›è¡Œä¸­
- `completed`: å·²å®Œæˆ
- `failed`: å¤±è´¥

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/projects \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æˆ‘çš„ç¬¬ä¸€ä¸ªé¡¹ç›®",
    "project_type": "static_comic",
    "status": "draft",
    "description": "é¡¹ç›®æè¿°",
    "video_scale": "16:9",
    "video_resolution": "1080p",
    "prompt": "åˆ›ä½œä¸€éƒ¨æ¸©é¦¨æ²»æ„ˆçš„é™æ€æ¼«ç”»,ç”»é£æ¸…æ–°ç®€æ´,è‰²è°ƒä»¥æŸ”å’Œçš„æš–è‰²ä¸ºä¸»"
  }'
```

**è¯´æ˜**

- `cover_image` ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºé»˜è®¤å°é¢å›¾
  - å¦‚æœé…ç½®äº† `API_BASE_URL` ç¯å¢ƒå˜é‡,ä½¿ç”¨é…ç½®çš„åŸŸå(å¦‚ `https://api.yourdomain.com/assets/project_cover.png`)
  - å¦åˆ™ä½¿ç”¨è¯·æ±‚çš„åŸºç¡€URL(å¦‚ `http://localhost:8000/assets/project_cover.png`)
- é»˜è®¤å°é¢å›¾æ–‡ä»¶ä½äºæœåŠ¡å™¨çš„ `/assets/project_cover.png` è·¯å¾„
- é…ç½®ç¤ºä¾‹: `.env` æ–‡ä»¶ä¸­æ·»åŠ  `API_BASE_URL=https://api.yourdomain.com`

**å“åº”** (201)

```json
{
  "id": 1,
  "name": "æˆ‘çš„ç¬¬ä¸€ä¸ªé¡¹ç›®",
  "project_type": "static_comic",
  "status": "draft",
  "description": "é¡¹ç›®æè¿°",
  "cover_image": "http://localhost:8000/assets/project_cover.png",
  "video_scale": "16:9",
  "video_resolution": "1080p",
  "prompt": "åˆ›ä½œä¸€éƒ¨æ¸©é¦¨æ²»æ„ˆçš„é™æ€æ¼«ç”»,ç”»é£æ¸…æ–°ç®€æ´,è‰²è°ƒä»¥æŸ”å’Œçš„æš–è‰²ä¸ºä¸»",
  "organization_id": 1,
  "created_by_id": 1,
  "created_by": {
    "id": 1,
    "username": "testuser",
    "display_name": "æµ‹è¯•ç”¨æˆ·"
  },
  "created_at": "2024-01-01T00:00:00Z"
}
```

---

### 3.3 è·å–é¡¹ç›®è¯¦æƒ…

è·å–æŒ‡å®šé¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
GET /api/projects/{project_id}
Authorization: Bearer <token>
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| project_id | integer | é¡¹ç›®ID |

**curl ç¤ºä¾‹**

```bash
curl -X GET http://localhost:8000/api/projects/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
{
  "id": 1,
  "name": "æˆ‘çš„ç¬¬ä¸€ä¸ªé¡¹ç›®",
  "project_type": "static_comic",
  "status": "draft",
  "description": null,
  "cover_image": "http://localhost:8000/assets/project_cover.png",
  "video_scale": null,
  "video_resolution": null,
  "prompt": "åˆ›ä½œä¸€éƒ¨æ¸©é¦¨æ²»æ„ˆçš„é™æ€æ¼«ç”»,ç”»é£æ¸…æ–°ç®€æ´,è‰²è°ƒä»¥æŸ”å’Œçš„æš–è‰²ä¸ºä¸»",
  "organization_id": 1,
  "created_by_id": 1,
  "created_by": {
    "id": 1,
    "username": "testuser",
    "display_name": "æµ‹è¯•ç”¨æˆ·"
  },
  "created_at": "2024-01-01T00:00:00Z"
}
```

**é”™è¯¯ç **

- `404`: é¡¹ç›®ä¸å­˜åœ¨

---

### 3.4 æ›´æ–°é¡¹ç›®

æ›´æ–°é¡¹ç›®ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
PATCH /api/projects/{project_id}
Authorization: Bearer <token>
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| project_id | integer | é¡¹ç›®ID |

**è¯·æ±‚ä½“**

```json
{
  "name": "æ›´æ–°åçš„é¡¹ç›®åç§°",
  "status": "progress",
  "description": "æ›´æ–°åçš„é¡¹ç›®æè¿°",
  "cover_image": "http://localhost:8000/assets/new_cover.png",
  "video_scale": "4:3",
  "prompt": "æ›´æ–°åçš„åˆ›ä½œæç¤ºè¯,é£æ ¼æ›´åŠ æˆç†Ÿç¨³é‡"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | å¦ | é¡¹ç›®åç§° |
| status | string | å¦ | é¡¹ç›®çŠ¶æ€ |
| description | string | å¦ | é¡¹ç›®æè¿° |
| cover_image | string | å¦ | å°é¢å›¾ç‰‡URL |
| video_scale | string | å¦ | è§†é¢‘æ¯”ä¾‹ |
| video_resolution | string | å¦ | è§†é¢‘åˆ†è¾¨ç‡ |
| prompt | string | å¦ | é¡¹ç›®åˆ›ä½œæç¤ºè¯ |

**curl ç¤ºä¾‹**

```bash
curl -X PATCH http://localhost:8000/api/projects/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ›´æ–°åçš„é¡¹ç›®åç§°",
    "status": "progress",
    "description": "æ›´æ–°åçš„é¡¹ç›®æè¿°",
    "cover_image": "http://localhost:8000/assets/new_cover.png",
    "video_scale": "4:3",
    "prompt": "æ›´æ–°åçš„åˆ›ä½œæç¤ºè¯,é£æ ¼æ›´åŠ æˆç†Ÿç¨³é‡"
  }'
```

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„å®Œæ•´é¡¹ç›®å¯¹è±¡ã€‚

**é”™è¯¯ç **

- `404`: é¡¹ç›®ä¸å­˜åœ¨

---

### 3.5 åˆ é™¤é¡¹ç›®

åˆ é™¤æŒ‡å®šé¡¹ç›®åŠå…¶æ‰€æœ‰å…³è”æ•°æ®(ç« èŠ‚ã€åˆ†é•œç­‰)ã€‚

**è¯·æ±‚**

```http
DELETE /api/projects/{project_id}
Authorization: Bearer <token>
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| project_id | integer | é¡¹ç›®ID |

**curl ç¤ºä¾‹**

```bash
curl -X DELETE http://localhost:8000/api/projects/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (204)

æ— å†…å®¹

**é”™è¯¯ç **

- `404`: é¡¹ç›®ä¸å­˜åœ¨

---

## 4. åœºæ™¯ç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/projects/{project_id}/scenes`

### 4.1 è·å–åœºæ™¯åˆ—è¡¨

æŒ‰åˆ›å»ºæ—¶é—´å‡åºè·å–æŒ‡å®šé¡¹ç›®ä¸‹çš„å…¨éƒ¨åœºæ™¯ã€‚

**è¯·æ±‚**

```http
GET /api/projects/{project_id}/scenes
Authorization: Bearer <token>
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| project_id | integer | é¡¹ç›®ID |

**curl ç¤ºä¾‹**

```bash
curl -X GET http://localhost:8000/api/projects/1/scenes \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "project_id": 1,
    "name": "é»æ˜è¡—æ™¯",
    "description": "é™æ€æ¼«é¡¹ç›®çš„é¦–ä¸ªåœºæ™¯,å±•ç°ä¸œæ–¹åˆå‡çš„æš–è‰²å…‰çº¿ã€‚",
    "prompt": "ç”Ÿæˆä¸€å¹…é»æ˜æ—¶åˆ†çš„åŸå¸‚è¡—æ™¯,æ°›å›´æ¸©æš–ä¸”å……æ»¡å¸Œæœ›",
    "image_url": "http://localhost:8000/static/uploads/scene_1.png",
    "created_by": {
      "id": 1,
      "username": "testuser",
      "display_name": "æµ‹è¯•ç”¨æˆ·"
    },
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

**å“åº”å­—æ®µè¯´æ˜**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | integer | åœºæ™¯ID |
| project_id | integer | æ‰€å±é¡¹ç›®ID |
| name | string | åœºæ™¯åç§° |
| description | string | åœºæ™¯æè¿°,å¯ä¸ºç©º |
| prompt | string | åœºæ™¯ç”Ÿæˆæç¤ºè¯ |
| image_url | string | åœºæ™¯å›¾åƒåœ°å€,å¯èƒ½ä¸ºç©º |
| created_by | object | åˆ›å»ºäººä¿¡æ¯,åŒ…å« `id`ã€`username`ã€`display_name` |
| created_at | string | è®°å½•åˆ›å»ºæ—¶é—´(ISO 8601æ ¼å¼) |

**é”™è¯¯ç **

- `404`: é¡¹ç›®ä¸å­˜åœ¨æˆ–æ— æƒé™è®¿é—®

---

## 5. ç« èŠ‚ç®¡ç†

è·¯å¾„å‰ç¼€: `/api/projects/{project_id}/chapters`

### 5.1 è·å–ç« èŠ‚åˆ—è¡¨

è·å–é¡¹ç›®çš„æ‰€æœ‰ç« èŠ‚ã€‚

**è¯·æ±‚**

```http
GET /api/projects/{project_id}/chapters
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X GET http://localhost:8000/api/projects/1/chapters \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "name": "ç¬¬ä¸€ç« ",
    "script_content": "å‰§æœ¬å†…å®¹...",
    "order_index": 0,
    "project_id": 1,
    "created_at": "2024-01-01T00:00:00Z",
    "storyboards": []
  }
]
```

---

### 5.2 åˆ›å»ºç« èŠ‚

ä¸ºé¡¹ç›®åˆ›å»ºæ–°ç« èŠ‚ã€‚

**è¯·æ±‚**

```http
POST /api/projects/{project_id}/chapters
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "name": "ç¬¬ä¸€ç« ",
  "script_content": "è¿™æ˜¯ç¬¬ä¸€ç« çš„å‰§æœ¬å†…å®¹...",
  "order_index": 0
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | æ˜¯ | ç« èŠ‚åç§° |
| script_content | string | å¦ | å‰§æœ¬å†…å®¹ |
| order_index | integer | å¦ | æ’åºç´¢å¼•,é»˜è®¤0 |

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/projects/1/chapters \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ç¬¬ä¸€ç« ",
    "script_content": "è¿™æ˜¯ç¬¬ä¸€ç« çš„å‰§æœ¬å†…å®¹...",
    "order_index": 0
  }'
```

**å“åº”** (201)

```json
{
  "id": 1,
  "name": "ç¬¬ä¸€ç« ",
  "script_content": "è¿™æ˜¯ç¬¬ä¸€ç« çš„å‰§æœ¬å†…å®¹...",
  "order_index": 0,
  "project_id": 1,
  "created_at": "2024-01-01T00:00:00Z",
  "storyboards": []
}
```

---

### 5.3 æ›´æ–°ç« èŠ‚

æ›´æ–°ç« èŠ‚ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
PATCH /api/projects/{project_id}/chapters/{chapter_id}
Authorization: Bearer <token>
Content-Type: application/json
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| project_id | integer | é¡¹ç›®ID |
| chapter_id | integer | ç« èŠ‚ID |

**è¯·æ±‚ä½“**

```json
{
  "name": "æ›´æ–°åçš„ç« èŠ‚å",
  "script_content": "æ›´æ–°åçš„å‰§æœ¬å†…å®¹",
  "order_index": 1
}
```

**curl ç¤ºä¾‹**

```bash
curl -X PATCH http://localhost:8000/api/projects/1/chapters/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ›´æ–°åçš„ç« èŠ‚å",
    "script_content": "æ›´æ–°åçš„å‰§æœ¬å†…å®¹",
    "order_index": 1
  }'
```

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„å®Œæ•´ç« èŠ‚å¯¹è±¡ã€‚

**é”™è¯¯ç **

- `404`: ç« èŠ‚ä¸å­˜åœ¨

---

### 5.4 åˆ é™¤ç« èŠ‚

åˆ é™¤æŒ‡å®šç« èŠ‚åŠå…¶æ‰€æœ‰åˆ†é•œã€‚

**è¯·æ±‚**

```http
DELETE /api/projects/{project_id}/chapters/{chapter_id}
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X DELETE http://localhost:8000/api/projects/1/chapters/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (204)

æ— å†…å®¹

---

### 5.5 æ‹†åˆ†ç« èŠ‚ä¸ºåˆ†é•œ

ä½¿ç”¨AIå°†ç« èŠ‚å‰§æœ¬è‡ªåŠ¨æ‹†åˆ†ä¸ºå¤šä¸ªåˆ†é•œã€‚

**è¯·æ±‚**

```http
POST /api/projects/{project_id}/chapters/{chapter_id}/split
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/projects/1/chapters/1/split \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "chapter_id": 1,
    "order_index": 0,
    "dialogue": "è§’è‰²å¯¹è¯å†…å®¹",
    "scene_description": "åœºæ™¯æè¿°",
    "image_url": null,
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

---

## 6. åˆ†é•œç®¡ç†

è·¯å¾„å‰ç¼€: `/api/projects/{project_id}/chapters/{chapter_id}/storyboards`

### 6.1 è·å–åˆ†é•œåˆ—è¡¨

è·å–ç« èŠ‚çš„æ‰€æœ‰åˆ†é•œã€‚

**è¯·æ±‚**

```http
GET /api/projects/{project_id}/chapters/{chapter_id}/storyboards
Authorization: Bearer <token>
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "chapter_id": 1,
    "order_index": 0,
    "dialogue": "è§’è‰²å¯¹è¯å†…å®¹",
    "scene_description": "åœºæ™¯æè¿°",
    "image_url": "https://example.com/storyboard1.jpg",
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

---

### 6.2 æ›´æ–°åˆ†é•œ

æ›´æ–°åˆ†é•œä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
PATCH /api/projects/{project_id}/chapters/{chapter_id}/storyboards/{storyboard_id}
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "dialogue": "æ›´æ–°åçš„å¯¹è¯",
  "scene_description": "æ›´æ–°åçš„åœºæ™¯æè¿°",
  "image_url": "https://example.com/new_image.jpg",
  "order_index": 1
}
```

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„å®Œæ•´åˆ†é•œå¯¹è±¡ã€‚

---

### 6.3 ç”Ÿæˆåˆ†é•œå›¾ç‰‡

ä¸ºé¡¹ç›®æ‰€æœ‰åˆ†é•œå¼‚æ­¥ç”Ÿæˆå›¾ç‰‡ã€‚

**è¯·æ±‚**

```http
POST /api/projects/{project_id}/storyboards:generate-images
Authorization: Bearer <token>
```

**å“åº”** (200)

```json
{
  "id": 1,
  "task_type": "generate_storyboard_images",
  "status": "queued",
  "payload": {
    "project_id": 1
  },
  "progress": 0,
  "result": null,
  "error_message": null,
  "retry_token": null,
  "created_at": "2024-01-01T00:00:00Z"
}
```

---

### 6.4 ç”Ÿæˆåˆ†é•œå…³é”®å¸§

ä¸ºé¡¹ç›®æ‰€æœ‰åˆ†é•œå¼‚æ­¥ç”Ÿæˆå…³é”®å¸§ã€‚

**è¯·æ±‚**

```http
POST /api/projects/{project_id}/storyboards:generate-keyframes
Authorization: Bearer <token>
```

**å“åº”** (200)

è¿”å›ä»»åŠ¡å¯¹è±¡(æ ¼å¼åŒä¸Š)ã€‚

---

### 6.5 ç”Ÿæˆåˆ†é•œè§†é¢‘

ä¸ºé¡¹ç›®æ‰€æœ‰åˆ†é•œå¼‚æ­¥ç”Ÿæˆè§†é¢‘ã€‚

**è¯·æ±‚**

```http
POST /api/projects/{project_id}/storyboards:generate-videos
Authorization: Bearer <token>
```

**å“åº”** (200)

è¿”å›ä»»åŠ¡å¯¹è±¡(æ ¼å¼åŒä¸Š)ã€‚

---

## 7. è§’è‰²ç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/projects/{project_id}/characters`

### 7.1 è·å–è§’è‰²åˆ—è¡¨

è·å–é¡¹ç›®çš„æ‰€æœ‰è§’è‰²ã€‚

**è¯·æ±‚**

```http
GET /api/projects/{project_id}/characters?page=1&size=100
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| page | integer | å¦ | 1 | é¡µç  |
| size | integer | å¦ | 100 | æ¯é¡µæ•°é‡,èŒƒå›´1-1000 |

**curl ç¤ºä¾‹**

```bash
curl -X GET "http://localhost:8000/api/projects/1/characters?page=1&size=100" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
{
  "items": [
    {
      "id": 1,
      "project_id": 1,
      "display_name": "æç™½",
      "description": "ä¸»è§’,è¯—äºº",
      "portraits": [
        {
          "src": "https://example.com/portrait1.jpg",
          "alt": "æ­£é¢ç…§"
        }
      ],
      "voice_preset": "zh_male_libai_voice",
      "voice_speed": 1.0,
      "voice_script": "åºŠå‰æ˜æœˆå…‰,ç–‘æ˜¯åœ°ä¸Šéœœ",
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  ],
  "total": 1
}
```

---

### 7.2 è·å–è§’è‰²è¯¦æƒ…

è·å–å•ä¸ªè§’è‰²çš„è¯¦ç»†ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
GET /api/projects/{project_id}/characters/{character_id}
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X GET http://localhost:8000/api/projects/1/characters/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (200)

```json
{
  "id": 1,
  "project_id": 1,
  "display_name": "æç™½",
  "description": "ä¸»è§’,è¯—äºº",
  "portraits": [
    {
      "src": "https://example.com/portrait1.jpg",
      "alt": "æ­£é¢ç…§"
    }
  ],
  "voice_preset": "zh_male_libai_voice",
  "voice_speed": 1.0,
  "voice_script": "åºŠå‰æ˜æœˆå…‰,ç–‘æ˜¯åœ°ä¸Šéœœ",
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

---

### 7.3 åˆ›å»ºè§’è‰²

ä¸ºé¡¹ç›®åˆ›å»ºæ–°è§’è‰²ã€‚

**è¯·æ±‚**

```http
POST /api/projects/{project_id}/characters
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "project_id": 1,
  "display_name": "æç™½",
  "description": "ä¸»è§’,è¯—äºº",
  "prompt": "å¤ä»£æ–‡äºº,èº«ç©¿ç™½è‰²é•¿è¢,æ‰‹æŒæŠ˜æ‰‡,æ°”è´¨å„’é›…,é¢å®¹æ¸…ç§€,é•¿å‘é£˜é€¸",
  "portraits": [
    {
      "src": "https://example.com/portrait_front.jpg",
      "alt": "æ­£é¢"
    },
    {
      "src": "https://example.com/portrait_side.jpg",
      "alt": "ä¾§é¢"
    },
    {
      "src": "https://example.com/portrait_45.jpg",
      "alt": "45åº¦ä¾§é¢"
    }
  ],
  "voice_preset": "zh_male_libai_voice",
  "voice_speed": 1.0,
  "voice_script": "åºŠå‰æ˜æœˆå…‰,ç–‘æ˜¯åœ°ä¸Šéœœ"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| project_id | integer | æ˜¯ | é¡¹ç›®ID,å¿…é¡»ä¸URLä¸­çš„project_idä¸€è‡´ |
| display_name | string | æ˜¯ | è§’è‰²æ˜¾ç¤ºåç§°,1-255å­—ç¬¦ |
| description | string | å¦ | è§’è‰²è®¾å®šæè¿° |
| prompt | string | å¦ | è§’è‰²ç”Ÿæˆæç¤ºè¯,ç”¨äºAIç”Ÿæˆè§’è‰²ç«‹ç»˜,æè¿°è§’è‰²å¤–è§‚ã€æœé¥°ã€æ°”è´¨ç­‰ç‰¹å¾ |
| portraits | array | å¦ | è§’è‰²ç«‹ç»˜åˆ—è¡¨,å»ºè®®æä¾›3å¼ :æ­£é¢ã€ä¾§é¢ã€45åº¦ä¾§é¢,é»˜è®¤ç©ºæ•°ç»„ |
| voice_preset | string | å¦ | éŸ³è‰²åç§°,æœ€å¤š255å­—ç¬¦ |
| voice_speed | float | å¦ | è¯­é€Ÿ,èŒƒå›´0.5-2.0,é»˜è®¤1.0 |
| voice_script | string | å¦ | è¯•è¯»æ–‡æœ¬ |

**PortraitItem ç»“æ„**

æ¯ä¸ªè§’è‰²å»ºè®®æä¾›3å¼ ç«‹ç»˜å›¾ç‰‡,åˆ†åˆ«å¯¹åº”ä¸åŒè§’åº¦:

```json
{
  "src": "string (å›¾ç‰‡URL)",
  "alt": "string (å›¾ç‰‡æè¿°: 'æ­£é¢' | 'ä¾§é¢' | '45åº¦ä¾§é¢')"
}
```

**ç«‹ç»˜è¯´æ˜:**
- **æ­£é¢**: è§’è‰²æ­£é¢è§†è§’çš„ç«‹ç»˜å›¾ç‰‡
- **ä¾§é¢**: è§’è‰²ä¾§é¢90åº¦è§†è§’çš„ç«‹ç»˜å›¾ç‰‡
- **45åº¦ä¾§é¢**: è§’è‰²45åº¦è§’è§†è§’çš„ç«‹ç»˜å›¾ç‰‡
- 3å¼ ç«‹ç»˜ç”¨äºä¸åŒåœºæ™¯ä¸‹çš„è§’è‰²å±•ç¤ºå’ŒåŠ¨ç”»åˆ¶ä½œ

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/projects/1/characters \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "project_id": 1,
    "display_name": "æç™½",
    "description": "ä¸»è§’,è¯—äºº",
    "prompt": "å¤ä»£æ–‡äºº,èº«ç©¿ç™½è‰²é•¿è¢,æ‰‹æŒæŠ˜æ‰‡,æ°”è´¨å„’é›…,é¢å®¹æ¸…ç§€,é•¿å‘é£˜é€¸",
    "portraits": [
      {
        "src": "https://example.com/portrait_front.jpg",
        "alt": "æ­£é¢"
      },
      {
        "src": "https://example.com/portrait_side.jpg",
        "alt": "ä¾§é¢"
      },
      {
        "src": "https://example.com/portrait_45.jpg",
        "alt": "45åº¦ä¾§é¢"
      }
    ],
    "voice_preset": "zh_male_libai_voice",
    "voice_speed": 1.0,
    "voice_script": "åºŠå‰æ˜æœˆå…‰,ç–‘æ˜¯åœ°ä¸Šéœœ"
  }'
```

**å“åº”** (201)

è¿”å›åˆ›å»ºçš„å®Œæ•´è§’è‰²å¯¹è±¡ã€‚

**é”™è¯¯ç **

- `400`: Project ID mismatch (è¯·æ±‚ä½“ä¸­çš„project_idä¸URLä¸åŒ¹é…)
- `404`: é¡¹ç›®ä¸å­˜åœ¨

---

### 7.4 æ›´æ–°è§’è‰²

æ›´æ–°è§’è‰²ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
PATCH /api/projects/{project_id}/characters/{character_id}
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„,åªæ›´æ–°æä¾›çš„å­—æ®µã€‚

```json
{
  "display_name": "æç™½(æ›´æ–°)",
  "description": "æ›´æ–°åçš„è§’è‰²æè¿°",
  "prompt": "å¤ä»£æ–‡äºº,èº«ç©¿ç™½è‰²é•¿è¢,æ‰‹æŒæŠ˜æ‰‡,æ°”è´¨å„’é›…,é¢å®¹æ¸…ç§€,é•¿å‘é£˜é€¸,å¨ä¸¥åº„é‡",
  "portraits": [
    {
      "src": "http://localhost:8000/assets/character_libai_front_v2.jpg",
      "alt": "æ­£é¢"
    },
    {
      "src": "http://localhost:8000/assets/character_libai_side_v2.jpg",
      "alt": "ä¾§é¢"
    },
    {
      "src": "http://localhost:8000/assets/character_libai_45_v2.jpg",
      "alt": "45åº¦ä¾§é¢"
    }
  ],
  "voice_preset": "zh_male_libai_voice_v2",
  "voice_speed": 1.2,
  "voice_script": "ä¸¾æ¯é‚€æ˜æœˆ,å¯¹å½±æˆä¸‰äºº"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| display_name | string | å¦ | è§’è‰²æ˜¾ç¤ºåç§°,1-255å­—ç¬¦ |
| description | string | å¦ | è§’è‰²è®¾å®šæè¿° |
| prompt | string | å¦ | è§’è‰²ç”Ÿæˆæç¤ºè¯,ç”¨äºAIç”Ÿæˆè§’è‰²ç«‹ç»˜ |
| portraits | array | å¦ | è§’è‰²ç«‹ç»˜åˆ—è¡¨ |
| voice_preset | string | å¦ | éŸ³è‰²åç§°,æœ€å¤š255å­—ç¬¦ |
| voice_speed | float | å¦ | è¯­é€Ÿ,èŒƒå›´0.5-2.0 |
| voice_script | string | å¦ | è¯•è¯»æ–‡æœ¬ |

**curl ç¤ºä¾‹**

```bash
curl -X PATCH http://localhost:8000/api/projects/1/characters/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "display_name": "æç™½(æ›´æ–°)",
    "description": "æ›´æ–°åçš„è§’è‰²æè¿°",
    "prompt": "å¤ä»£æ–‡äºº,èº«ç©¿ç™½è‰²é•¿è¢,æ‰‹æŒæŠ˜æ‰‡,æ°”è´¨å„’é›…,é¢å®¹æ¸…ç§€,é•¿å‘é£˜é€¸,å¨ä¸¥åº„é‡",
    "portraits": [
      {
        "src": "http://localhost:8000/assets/character_libai_front_v2.jpg",
        "alt": "æ­£é¢"
      },
      {
        "src": "http://localhost:8000/assets/character_libai_side_v2.jpg",
        "alt": "ä¾§é¢"
      },
      {
        "src": "http://localhost:8000/assets/character_libai_45_v2.jpg",
        "alt": "45åº¦ä¾§é¢"
      }
    ],
    "voice_preset": "zh_male_libai_voice_v2",
    "voice_speed": 1.2,
    "voice_script": "ä¸¾æ¯é‚€æ˜æœˆ,å¯¹å½±æˆä¸‰äºº"
  }'
```

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„å®Œæ•´è§’è‰²å¯¹è±¡ã€‚

---

### 7.5 åˆ é™¤è§’è‰²

åˆ é™¤æŒ‡å®šè§’è‰²ã€‚

**è¯·æ±‚**

```http
DELETE /api/projects/{project_id}/characters/{character_id}
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X DELETE http://localhost:8000/api/projects/1/characters/1 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (204)

æ— å†…å®¹

**é”™è¯¯ç **

- `404`: è§’è‰²ä¸å­˜åœ¨

---

### 7.6 å°†è§’è‰²ç«‹ç»˜å¯¼å…¥ç´ æåº“

å¯¼å…¥è§’è‰²é…ç½®ä¸­çš„ç«‹ç»˜,å¹¶åœ¨ç´ æåº“ä¸­ç”Ÿæˆå¯¹åº”çš„ç´ æè®°å½•ã€‚

**è¯·æ±‚**

```http
POST /api/projects/{project_id}/characters/{character_id}/import-portraits
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/projects/1/characters/1/import-portraits \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**å“åº”** (201)

```json
[
  {
    "id": 12,
    "name": "è§’è‰²ç«‹ç»˜-æ­£é¢",
    "asset_type": "image",
    "asset_sub_type": "character_portrait",
    "object_key": "org1/characters/portrait-front.png",
    "url": "https://oss.example.com/org1/characters/portrait-front.png",
    "size": 102400,
    "metadata": {
      "character_id": 8,
      "index": 1
    },
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

**é”™è¯¯ç **

- `400`: è§’è‰²ç«‹ç»˜æ•°é‡ä¸è¶³ 3 å¼ 
- `404`: é¡¹ç›®æˆ–è§’è‰²ä¸å­˜åœ¨

---

## 8. ç´ æç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/assets`

### 8.1 è·å–ç´ æåˆ—è¡¨

è·å–ç»„ç»‡çš„æ‰€æœ‰ç´ æã€‚

**è¯·æ±‚**

```http
GET /api/assets?asset_type=IMAGE&search=è§’è‰²&page=1&size=20
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
# è·å–æ‰€æœ‰ç´ æ
curl -X GET "http://localhost:8000/api/assets" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

# å¸¦è¿‡æ»¤æ¡ä»¶çš„è¯·æ±‚
curl -X GET "http://localhost:8000/api/assets?asset_type=IMAGE&search=è§’è‰²&page=1&size=20" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| asset_type | string | å¦ | - | ç´ æç±»å‹è¿‡æ»¤ |
| search | string | å¦ | - | æœç´¢å…³é”®è¯,æ¨¡ç³ŠåŒ¹é…ç´ æåç§° |
| page | integer | å¦ | 1 | é¡µç  |
| size | integer | å¦ | 20 | æ¯é¡µæ•°é‡,èŒƒå›´1-100 |

**ç´ æç±»å‹æšä¸¾ (AssetType)**

- `IMAGE`: å›¾ç‰‡
- `AUDIO`: éŸ³é¢‘
- `VIDEO`: è§†é¢‘

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "organization_id": 1,
    "name": "è§’è‰²ç«‹ç»˜_æç™½",
    "description": "æç™½è§’è‰²æ­£é¢ç«‹ç»˜",
    "asset_type": "IMAGE",
    "sub_type": "character_ip",
    "creation_method": "GENERATED",
    "tags": ["è§’è‰²", "æç™½"],
    "file_url": "https://example.com/asset1.jpg",
    "object_key": "1/abc123.jpg",
    "uploaded_by_id": 3,
    "uploaded_by": {
      "id": 3,
      "username": "admin_user",
      "display_name": "é¡¹ç›®ç®¡ç†å‘˜"
    },
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

**ç´ æå­ç±»å‹æšä¸¾ (AssetSubType)**

- `character_ip`: è§’è‰²IP
- `scene`: åœºæ™¯
- `bgm`: èƒŒæ™¯éŸ³ä¹
- `voice_clone`: è¯­éŸ³å…‹éš†
- `video_effect`: è§†é¢‘ç‰¹æ•ˆ
- `project_config`: é¡¹ç›®é…ç½®

**åˆ›å»ºæ–¹å¼æšä¸¾ (CreationMethod)**

- `UPLOAD`: ä¸Šä¼ 
- `GENERATED`: AIç”Ÿæˆ

---

### 8.2 åˆ›å»ºç´ æ

åˆ›å»ºæ–°ç´ æè®°å½•ã€‚

**è¯·æ±‚**

```http
POST /api/assets
Authorization: Bearer <token>
Content-Type: application/json
```

**curl ç¤ºä¾‹**

```bash
curl -X POST "http://localhost:8000/api/assets" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ–°ç´ æ",
    "description": "ç´ ææè¿°",
    "asset_type": "IMAGE",
    "sub_type": "scene",
    "creation_method": "UPLOAD",
    "tags": ["åœºæ™¯", "åŸå¸‚"],
    "file_url": "https://example.com/asset.jpg",
    "object_key": "1/upload123.jpg"
  }'
```

**è¯·æ±‚ä½“**

```json
{
  "name": "æ–°ç´ æ",
  "description": "ç´ ææè¿°",
  "asset_type": "IMAGE",
  "sub_type": "scene",
  "creation_method": "UPLOAD",
  "tags": ["åœºæ™¯", "åŸå¸‚"],
  "file_url": "https://example.com/asset.jpg",
  "object_key": "1/upload123.jpg"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | æ˜¯ | ç´ æåç§° |
| description | string | å¦ | ç´ ææè¿° |
| asset_type | string | æ˜¯ | ç´ æç±»å‹ |
| sub_type | string | æ˜¯ | ç´ æå­ç±»å‹ |
| creation_method | string | æ˜¯ | åˆ›å»ºæ–¹å¼ |
| tags | array | å¦ | æ ‡ç­¾åˆ—è¡¨ |
| file_url | string | å¦ | æ–‡ä»¶è®¿é—®URL |
| object_key | string | å¦ | OSSå¯¹è±¡é”® |

**å“åº”** (201)

è¿”å›åˆ›å»ºçš„å®Œæ•´ç´ æå¯¹è±¡ã€‚

---

### 8.3 æ›´æ–°ç´ æ

æ›´æ–°ç´ æä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
PATCH /api/assets/{asset_id}
Authorization: Bearer <token>
Content-Type: application/json
```

**curl ç¤ºä¾‹**

```bash
curl -X PATCH "http://localhost:8000/api/assets/1" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ›´æ–°åçš„ç´ æåç§°",
    "description": "æ›´æ–°åçš„æè¿°",
    "tags": ["æ–°æ ‡ç­¾1", "æ–°æ ‡ç­¾2"]
  }'
```

**è¯·æ±‚ä½“**

```json
{
  "name": "æ›´æ–°åçš„ç´ æåç§°",
  "description": "æ›´æ–°åçš„æè¿°",
  "tags": ["æ–°æ ‡ç­¾1", "æ–°æ ‡ç­¾2"]
}
```

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„å®Œæ•´ç´ æå¯¹è±¡ã€‚

---

### 8.4 åˆ é™¤ç´ æ

åˆ é™¤ç´ æè®°å½•åŠOSSä¸Šçš„æ–‡ä»¶ã€‚

**è¯·æ±‚**

```http
DELETE /api/assets/{asset_id}
Authorization: Bearer <token>
```

**curl ç¤ºä¾‹**

```bash
curl -X DELETE "http://localhost:8000/api/assets/1" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**å“åº”** (204)

æ— å†…å®¹

**è¯´æ˜**

- åˆ é™¤ç´ ææ—¶ä¼šåŒæ—¶åˆ é™¤OSSä¸Šå¯¹åº”çš„æ–‡ä»¶
- å¦‚æœOSSæœªé…ç½®æˆ–åˆ é™¤å¤±è´¥,åªè®°å½•è­¦å‘Šæ—¥å¿—,ä¸å½±å“æ•°æ®åº“è®°å½•åˆ é™¤

---

## 9. ä»»åŠ¡ç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/tasks`

### 9.1 è·å–ä»»åŠ¡åˆ—è¡¨

è·å–ç»„ç»‡çš„ä»»åŠ¡åˆ—è¡¨ã€‚

**è¯·æ±‚**

```http
GET /api/tasks?status=running&limit=50
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| status | string | å¦ | - | ä»»åŠ¡çŠ¶æ€è¿‡æ»¤ |
| limit | integer | å¦ | 50 | é™åˆ¶æ•°é‡,èŒƒå›´1-200 |

**ä»»åŠ¡çŠ¶æ€æšä¸¾ (TaskStatus)**

- `queued`: æ’é˜Ÿä¸­
- `running`: è¿è¡Œä¸­
- `completed`: å·²å®Œæˆ
- `failed`: å¤±è´¥

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "task_type": "text_to_image",
    "status": "completed",
    "payload": {
      "prompt": "ä¸€ä¸ªç¾ä¸½çš„é£æ™¯",
      "size": "2K"
    },
    "progress": 100,
    "result": {
      "image_url": "https://example.com/generated.jpg",
      "asset_id": 123
    },
    "error_message": null,
    "retry_token": null,
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

---

### 9.2 è·å–ä»»åŠ¡è¯¦æƒ…

è·å–å•ä¸ªä»»åŠ¡çš„è¯¦ç»†ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
GET /api/tasks/{task_id}
Authorization: Bearer <token>
```

**å“åº”** (200)

è¿”å›å®Œæ•´çš„ä»»åŠ¡å¯¹è±¡(æ ¼å¼åŒä¸Š)ã€‚

---

### 9.3 åˆ›å»ºè‡ªå®šä¹‰ä»»åŠ¡

åˆ›å»ºè‡ªå®šä¹‰ä»»åŠ¡ã€‚

**è¯·æ±‚**

```http
POST /api/tasks
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "task_type": "custom_task",
  "payload": {
    "custom_field": "value"
  }
}
```

**å“åº”** (201)

è¿”å›åˆ›å»ºçš„ä»»åŠ¡å¯¹è±¡ã€‚

---

### 9.4 é‡è¯•ä»»åŠ¡

é‡ç½®ä»»åŠ¡çŠ¶æ€å¹¶é‡æ–°æ‰§è¡Œã€‚

**è¯·æ±‚**

```http
POST /api/tasks/{task_id}/retry
Authorization: Bearer <token>
```

**å“åº”** (200)

è¿”å›é‡ç½®åçš„ä»»åŠ¡å¯¹è±¡ã€‚

---

### 9.5 åˆ›å»ºæ–‡ç”Ÿå›¾ä»»åŠ¡

åˆ›å»ºæ–‡æœ¬ç”Ÿæˆå›¾ç‰‡ä»»åŠ¡ã€‚

**è¯·æ±‚**

```http
POST /api/tasks/text-to-image
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "prompt": "ä¸€ä¸ªç¾ä¸½çš„å¤ä»£åŸå¸‚,å¤•é˜³è¥¿ä¸‹,æ°´å¢¨ç”»é£æ ¼",
  "size": "2K",
  "asset_name": "å¤åŸå¤•é˜³",
  "asset_description": "æ°´å¢¨é£æ ¼çš„å¤åŸå¤•é˜³åœºæ™¯",
  "sub_type": "scene",
  "tags": ["åœºæ™¯", "å¤åŸ", "æ°´å¢¨"]
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|------|------|
| prompt | string | æ˜¯ | - | å›¾ç‰‡ç”Ÿæˆæç¤ºè¯,è‡³å°‘1ä¸ªå­—ç¬¦ |
| size | string | å¦ | "2K" | ç”Ÿæˆå°ºå¯¸,å¦‚: 1K/2K/4K æˆ– 2560x1440 |
| asset_name | string | å¦ | "AIç”Ÿæˆå›¾ç‰‡" | ç´ æåç§° |
| asset_description | string | å¦ | null | ç´ ææè¿° |
| sub_type | string | å¦ | "scene" | ç´ æå­ç±»å‹ |
| tags | array | å¦ | [] | æ ‡ç­¾åˆ—è¡¨ |

**åŠŸèƒ½è¯´æ˜**

è¯¥æ¥å£ä¼š:
1. åˆ›å»ºä»»åŠ¡è®°å½•å¹¶ä¿å­˜åˆ°æ•°æ®åº“
2. å¼‚æ­¥è°ƒç”¨Seedream APIç”Ÿæˆå›¾ç‰‡
3. ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡å¹¶ä¸Šä¼ åˆ°OSS
4. åœ¨ç´ æç®¡ç†ä¸­å¿ƒåˆ›å»ºç´ æè®°å½•
5. æ›´æ–°ä»»åŠ¡çŠ¶æ€å’Œç»“æœ

å¯ä»¥é€šè¿‡ `GET /api/tasks/{task_id}` æŸ¥è¯¢ä»»åŠ¡è¿›åº¦å’ŒçŠ¶æ€ã€‚

**å“åº”** (201)

```json
{
  "id": 1,
  "task_type": "text_to_image",
  "status": "queued",
  "payload": {
    "prompt": "ä¸€ä¸ªç¾ä¸½çš„å¤ä»£åŸå¸‚,å¤•é˜³è¥¿ä¸‹,æ°´å¢¨ç”»é£æ ¼",
    "size": "2K",
    "asset_name": "å¤åŸå¤•é˜³",
    "asset_description": "æ°´å¢¨é£æ ¼çš„å¤åŸå¤•é˜³åœºæ™¯",
    "sub_type": "scene",
    "tags": ["åœºæ™¯", "å¤åŸ", "æ°´å¢¨"]
  },
  "progress": 0,
  "result": null,
  "error_message": null,
  "retry_token": null,
  "created_at": "2024-01-01T00:00:00Z"
}
```

---

### 9.6 æ‰¹é‡ç”Ÿæˆè§’è‰²ç«‹ç»˜

ä¸ºè§’è‰²ç”Ÿæˆ3å¼ ä¸åŒè§’åº¦çš„ç«‹ç»˜å›¾ç‰‡ã€‚

**è¯·æ±‚**

```http
POST /api/tasks/generate-character-images
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "character_id": 1,
  "prompt": "ä¸€ä¸ªè‹±ä¿Šçš„å¤ä»£å‰‘å®¢,ç©¿ç€ç™½è‰²é•¿è¢,é•¿å‘é£˜é€¸",
  "size": "2K"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|------|------|
| character_id | integer | æ˜¯ | - | è§’è‰²ID |
| prompt | string | æ˜¯ | - | è§’è‰²æè¿°/æç¤ºè¯,è‡³å°‘1ä¸ªå­—ç¬¦ |
| size | string | å¦ | "2K" | ç”Ÿæˆå°ºå¯¸,å¦‚: 1K/2K/4K æˆ– 2560x1440 |

**åŠŸèƒ½è¯´æ˜**

è¯¥æ¥å£ä¼š:
1. åˆ›å»ºä»»åŠ¡è®°å½•å¹¶ä¿å­˜åˆ°æ•°æ®åº“
2. å¼‚æ­¥è°ƒç”¨Seedream APIç”Ÿæˆ3å¼ ä¸åŒè§’åº¦çš„å›¾ç‰‡(æ­£è„¸ã€ä¾§è„¸ã€45åº¦ä¾§è„¸)
3. ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡å¹¶ä¸Šä¼ åˆ°OSS
4. æ›´æ–°è§’è‰²çš„portraitså­—æ®µ,**ä¸æ·»åŠ åˆ°ç´ æåº“**
5. æ›´æ–°ä»»åŠ¡çŠ¶æ€å’Œç»“æœ

**å“åº”** (201)

è¿”å›åˆ›å»ºçš„ä»»åŠ¡å¯¹è±¡(æ ¼å¼åŒä¸Š)ã€‚

---

## 10. å­˜å‚¨ç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/storage`

### 10.1 ä¸Šä¼ æ–‡ä»¶

ä¸Šä¼ æ–‡ä»¶åˆ°OSS,ä»…è´Ÿè´£ç”Ÿæˆå¯¹è±¡å­˜å‚¨è®°å½•,ä¸ä¼šå†™å…¥æ•°æ®åº“ã€‚

**è¯·æ±‚**

```http
POST /api/storage/upload
Authorization: Bearer <token>
Content-Type: multipart/form-data
```

**è¯·æ±‚ä½“**

ä½¿ç”¨ `multipart/form-data` æ ¼å¼:

```
file: <binary file data>
```

**ç¤ºä¾‹**

```bash
curl -X POST http://localhost:8000/api/storage/upload \
  -H "Authorization: Bearer <token>" \
  -F "file=@/path/to/image.png"
```

**å“åº”** (200)

```json
{
  "file_id": "1/abc123def456.jpg",
  "object_key": "1/abc123def456.jpg",
  "file_url": "https://your-oss-domain.com/1/abc123def456.jpg",
  "filename": "my_image.jpg",
  "size": 1024000,
  "content_type": "image/jpeg",
  "uploaded_by": 1
}
```

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| file_id | string | æ–‡ä»¶ID(ç­‰åŒäºobject_key) |
| object_key | string | OSSå¯¹è±¡é”® |
| file_url | string | æ–‡ä»¶è®¿é—®URL |
| filename | string | åŸå§‹æ–‡ä»¶å |
| size | integer | æ–‡ä»¶å¤§å°(å­—èŠ‚) |
| content_type | string | æ–‡ä»¶MIMEç±»å‹ |
| uploaded_by | integer | ä¸Šä¼ è€…ç”¨æˆ·ID |

**é”™è¯¯ç **

- `400`: OSSæœªé…ç½®
- `500`: ä¸Šä¼ æ–‡ä»¶åˆ°OSSå¤±è´¥

---

### 10.2 è·å–é¢„ç­¾åURL

ç”Ÿæˆç´ æè®¿é—®URLã€‚å½“å‰å®ç°åŸºäºå…¬å…±åŸŸå/Endpoint ç›´æ¥è¿”å›å¯è®¿é—®é“¾æ¥,`expires_at` æ’ä¸º `null`ã€‚

**è¯·æ±‚**

```http
GET /api/storage/presign?object_key=1/abc123.jpg
Authorization: Bearer <token>
```

**ç¤ºä¾‹**

```bash
curl -G http://localhost:8000/api/storage/presign \
  -H "Authorization: Bearer <token>" \
  --data-urlencode "object_key=uploads/1/abc123.jpg"
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| object_key | string | æ˜¯ | OSSå¯¹è±¡é”® |

**æƒé™éªŒè¯**

ç³»ç»Ÿä¼šéªŒè¯object_keyçš„è®¿é—®æƒé™:
1. æ£€æŸ¥object_keyæ˜¯å¦åŒ…å«å½“å‰ç»„ç»‡ID
2. æˆ–æ£€æŸ¥æ˜¯å¦ä¸ºå·²æ³¨å†Œçš„ç´ æä¸”å±äºå½“å‰ç»„ç»‡

**å“åº”** (200)

```json
{
  "url": "https://your-oss-domain.com/1/abc123.jpg",
  "method": "GET",
  "expires_at": null,
  "signed_headers": {}
}
```

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| url | string | å¯è®¿é—®çš„ç´ æURL |
| method | string | HTTPæ–¹æ³• |
| expires_at | string / null | è¿‡æœŸæ—¶é—´,å½“å‰è¿”å› `null` |
| signed_headers | object | é™„å¸¦è¯·æ±‚å¤´(å½“å‰ä¸ºç©ºå¯¹è±¡) |

**é”™è¯¯ç **

- `400`: OSSæœªé…ç½®
- `404`: ç´ æä¸å­˜åœ¨æˆ–æ— æƒé™è®¿é—®
- `500`: ç”Ÿæˆè®¿é—®URLå¤±è´¥

---

## 11. AIç”Ÿæˆæ¨¡å—

è·¯å¾„å‰ç¼€: `/api/ai`

### 11.1 æ–‡ç”Ÿå›¾

æ–‡æœ¬ç”Ÿæˆå›¾ç‰‡(åŒæ­¥æ¥å£)ã€‚

**è¯·æ±‚**

```http
POST /api/ai/text-to-image
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "prompt": "ä¸€ä¸ªç¾ä¸½çš„é£æ™¯,è“å¤©ç™½äº‘",
  "size": "2K",
  "sequential_image_generation": "disabled",
  "response_format": "url",
  "watermark": false,
  "download": true,
  "scene_name": "é£æ™¯1",
  "save_dir": "/custom/path"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| prompt | string | æ˜¯ | æç¤ºè¯ |
| size | string | å¦ | å°ºå¯¸,å¦‚: 2K æˆ– 2048x2048 |
| sequential_image_generation | string | å¦ | Seedreamé¡ºåºç”Ÿæˆè®¾ç½®,é€šå¸¸ä¸º"disabled" |
| response_format | string | å¦ | å“åº”æ ¼å¼,é»˜è®¤"url" |
| watermark | boolean | å¦ | æ˜¯å¦æ·»åŠ æ°´å° |
| download | boolean | å¦ | æ˜¯å¦å¼ºåˆ¶ä¸‹è½½ |
| scene_name | string | å¦ | åœºæ™¯åç§°(ä¿å­˜æ—¶ä½¿ç”¨) |
| save_dir | string | å¦ | ä¿å­˜ç›®å½•(å¯é€‰) |

**å“åº”** (200)

```json
{
  "url": "https://example.com/generated.jpg",
  "size": "2048x2048",
  "output_tokens": 1024,
  "saved_path": "/path/to/saved/image.jpg",
  "raw": {
    "seedream_response": "..."
  }
}
```

**é”™è¯¯ç **

- `400`: å‚æ•°é”™è¯¯ / å¼•ç”¨å›¾ç‰‡ä¸‹è½½å¤±è´¥
- `502`: AIæœåŠ¡é”™è¯¯
- `503`: AIæœåŠ¡é…ç½®é”™è¯¯

---

### 11.2 å›¾ç”Ÿå›¾

åŸºäºå‚è€ƒå›¾ç”Ÿæˆæ–°å›¾ç‰‡ã€‚

**è¯·æ±‚**

```http
POST /api/ai/image-to-image
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "prompt": "å°†è¿™ä¸ªåœºæ™¯æ”¹ä¸ºå¤œæ™š",
  "reference_image_url": "https://example.com/ref.jpg",
  "reference_image_path": null,
  "size": "2K",
  "sequential_image_generation": "disabled",
  "response_format": "url",
  "download": true,
  "scene_name": "å¤œæ™¯",
  "save_dir": null
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| prompt | string | æ˜¯ | æç¤ºè¯ |
| reference_image_url | string | æ¡ä»¶ | å‚è€ƒå›¾ç‰‡çš„å…¬å¼€URL |
| reference_image_path | string | æ¡ä»¶ | å‚è€ƒå›¾ç‰‡çš„æœåŠ¡å™¨è·¯å¾„ |
| size | string | å¦ | å°ºå¯¸ |
| sequential_image_generation | string | å¦ | é¡ºåºç”Ÿæˆè®¾ç½® |
| response_format | string | å¦ | å“åº”æ ¼å¼ |
| download | boolean | å¦ | æ˜¯å¦ä¸‹è½½ |
| scene_name | string | å¦ | åœºæ™¯åç§° |
| save_dir | string | å¦ | ä¿å­˜ç›®å½• |

**æ³¨æ„**: `reference_image_url` å’Œ `reference_image_path` å¿…é¡»è‡³å°‘æä¾›ä¸€ä¸ªã€‚

**å“åº”** (200)

æ ¼å¼åŒæ–‡ç”Ÿå›¾æ¥å£ã€‚

---

### 11.3 æ–‡ç”Ÿè§†é¢‘

æ–‡æœ¬ç”Ÿæˆè§†é¢‘(å¼‚æ­¥æ¥å£)ã€‚

**è¯·æ±‚**

```http
POST /api/ai/text-to-video
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "prompt": "ä¸€ä¸ªäººåœ¨æµ·è¾¹æ•£æ­¥",
  "duration": 5,
  "resolution": "720p",
  "ratio": "16:9",
  "model": null,
  "seed": null,
  "extra_directives": [],
  "wait_for_result": false,
  "poll_interval": 5,
  "timeout": 300
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| prompt | string | æ˜¯ | - | æç¤ºè¯ |
| duration | integer | å¦ | 5 | è§†é¢‘æ—¶é•¿(ç§’),èŒƒå›´1-60 |
| resolution | string | å¦ | "720p" | åˆ†è¾¨ç‡ |
| ratio | string | å¦ | "16:9" | å®½é«˜æ¯” |
| model | string | å¦ | null | æ¨¡å‹ID |
| seed | integer | å¦ | null | éšæœºç§å­ |
| extra_directives | array | å¦ | null | é¢å¤–æŒ‡ä»¤ |
| wait_for_result | boolean | å¦ | false | æ˜¯å¦ç­‰å¾…å®Œæˆ |
| poll_interval | integer | å¦ | null | è½®è¯¢é—´éš”(ç§’),èŒƒå›´1-120 |
| timeout | integer | å¦ | null | è¶…æ—¶æ—¶é—´(ç§’),èŒƒå›´10-3600 |

**å“åº”** (200)

```json
{
  "task_id": "video_task_123",
  "status": "processing",
  "model": "text-to-video-v1",
  "video_url": null,
  "resolution": "720p",
  "duration": 5,
  "ratio": "16:9",
  "frames_per_second": 24,
  "usage": {
    "credits": 100
  },
  "raw": null
}
```

---

### 11.4 å›¾ç”Ÿè§†é¢‘

åŸºäºé¦–å°¾å¸§ç”Ÿæˆè§†é¢‘ã€‚

**è¯·æ±‚**

```http
POST /api/ai/image-to-video
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "first_frame_url": "https://example.com/first.jpg",
  "last_frame_url": "https://example.com/last.jpg",
  "prompt": "å¹³æ»‘è¿‡æ¸¡",
  "duration": 8,
  "ratio": "adaptive",
  "model": null,
  "seed": null,
  "extra_directives": [],
  "wait_for_result": false,
  "poll_interval": 5,
  "timeout": 300
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| first_frame_url | string | æ˜¯ | - | é¦–å¸§å›¾ç‰‡URL |
| last_frame_url | string | å¦ | null | å°¾å¸§å›¾ç‰‡URL,é»˜è®¤ç­‰äºé¦–å¸§ |
| prompt | string | æ˜¯ | - | æç¤ºè¯ |
| duration | integer | å¦ | 8 | è§†é¢‘æ—¶é•¿(ç§’),èŒƒå›´1-60 |
| ratio | string | å¦ | "adaptive" | å®½é«˜æ¯” |
| model | string | å¦ | null | æ¨¡å‹ID |
| seed | integer | å¦ | null | éšæœºç§å­ |
| extra_directives | array | å¦ | null | é¢å¤–æŒ‡ä»¤ |
| wait_for_result | boolean | å¦ | false | æ˜¯å¦ç­‰å¾…å®Œæˆ |
| poll_interval | integer | å¦ | null | è½®è¯¢é—´éš”(ç§’) |
| timeout | integer | å¦ | null | è¶…æ—¶æ—¶é—´(ç§’) |

**å“åº”** (200)

æ ¼å¼åŒæ–‡ç”Ÿè§†é¢‘æ¥å£ã€‚

---

## 12. AIä»£ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/agents`

### 12.1 è¿è¡Œå·¥ä½œæµ

æ‰§è¡ŒCoze AIå·¥ä½œæµã€‚

**è¯·æ±‚**

```http
POST /api/agents/workflow/run
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "input": "ç”Ÿæˆä¸€ä¸ªç§‘å¹»æ•…äº‹çš„è§’è‰²è®¾å®š",
  "style": "sci-fi",
  "workflow_id": "custom_workflow_123",
  "parameters": {
    "custom_param": "value"
  }
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| input | string | æ˜¯ | ç”¨æˆ·è¾“å…¥ |
| style | string | å¦ | æ ·å¼æŒ‡ä»¤ |
| workflow_id | string | å¦ | å·¥ä½œæµID,é»˜è®¤ä½¿ç”¨é…ç½®çš„å·¥ä½œæµ |
| parameters | object | å¦ | é¢å¤–å‚æ•° |

**å“åº”** (200)

```json
{
  "workflow_id": "custom_workflow_123",
  "events": [
    {
      "event": "message",
      "data": "ç”Ÿæˆçš„å†…å®¹...",
      "id": "event_1"
    }
  ]
}
```

**é”™è¯¯ç **

- `502`: CozeæœåŠ¡é”™è¯¯
- `503`: CozeæœåŠ¡é…ç½®é”™è¯¯

---

### 12.2 æ‰¹é‡ç”Ÿæˆè§’è‰²

ä½¿ç”¨AIæ‰¹é‡ç”Ÿæˆè§’è‰²ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
POST /api/agents/generate-characters
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "role_info": "ä¸€ä¸ªå¤è£…å‰§,éœ€è¦3ä¸ªä¸»è¦è§’è‰²:çš‡å¸ã€çš‡åã€å°†å†›",
  "project_id": 1
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| role_info | string | æ˜¯ | è§’è‰²ä¿¡æ¯æè¿° |
| project_id | integer | æ˜¯ | é¡¹ç›®ID |

**curlç¤ºä¾‹**

```bash
curl -X POST http://your-domain.com/api/agents/generate-characters \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "role_info": "ä¸€ä¸ªå¤è£…å‰§,éœ€è¦3ä¸ªä¸»è¦è§’è‰²:çš‡å¸ã€çš‡åã€å°†å†›",
    "project_id": 1
  }'
```

**åŠŸèƒ½è¯´æ˜**

è¯¥æ¥å£ä¼š:
1. è°ƒç”¨Cozeå·¥ä½œæµå¤„ç†è§’è‰²ä¿¡æ¯
2. è§£æè¿”å›çš„è§’è‰²æ•°æ®
3. è½¬æ¢ä¸ºå‰ç«¯æœŸæœ›çš„æ ¼å¼

**Cozeè¿”å›æ ¼å¼**:
```json
{
  "role": "è§’è‰²åç§°",
  "role_content": "è§’è‰²è®¾å®šæè¿°",
  "voice_demo": "è¯•è¯»æ–‡æœ¬",
  "voice_speed": "1.1"
}
```

**å‰ç«¯æœŸæœ›æ ¼å¼**:
```json
{
  "name": "è§’è‰²åç§°",
  "displayName": "è§’è‰²åç§°",
  "description": "è§’è‰²è®¾å®š",
  "roleType": "ä¸»è§’/é…è§’",
  "voicePreset": "éŸ³è‰²åç§°",
  "voiceSpeed": 1.1,
  "voiceScript": "è¯•è¯»æ–‡æœ¬",
  "portraits": []
}
```

**å“åº”** (200)

```json
{
  "success": true,
  "characters": [
    {
      "name": "çš‡å¸",
      "displayName": "çš‡å¸",
      "description": "å¨ä¸¥çš„çš‡å¸,ç»Ÿæ²»å¤©ä¸‹",
      "roleType": "ä¸»è§’",
      "voicePreset": "",
      "voiceSpeed": 1.0,
      "voiceScript": "æœ•å³å¤©ä¸‹",
      "portraits": []
    }
  ],
  "project_id": 1,
  "events_count": 3
}
```

**é”™è¯¯ç **

- `500`: ç”Ÿæˆè§’è‰²å¤±è´¥
- `502`: CozeæœåŠ¡é”™è¯¯
- `503`: CozeæœåŠ¡é…ç½®é”™è¯¯

---

## 13. é€šçŸ¥æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/notifications`

### 13.1 è·å–é€šçŸ¥åˆ—è¡¨

è·å–ç»„ç»‡çš„æ‰€æœ‰é€šçŸ¥ã€‚

**è¯·æ±‚**

```http
GET /api/notifications
Authorization: Bearer <token>
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "organization_id": 1,
    "title": "ä»»åŠ¡å®Œæˆ",
    "message": "æ–‡ç”Ÿå›¾ä»»åŠ¡å·²å®Œæˆ",
    "type": "info",
    "is_read": false,
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

---

### 13.2 æ ‡è®°é€šçŸ¥å·²è¯»

å°†é€šçŸ¥æ ‡è®°ä¸ºå·²è¯»ã€‚

**è¯·æ±‚**

```http
PATCH /api/notifications/{notification_id}:read
Authorization: Bearer <token>
```

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„é€šçŸ¥å¯¹è±¡ã€‚

**é”™è¯¯ç **

- `404`: é€šçŸ¥ä¸å­˜åœ¨

---

## 14. å¥—é¤ç®¡ç†æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/plans`

### 14.1 è·å–å¥—é¤åˆ—è¡¨

è·å–æ‰€æœ‰å¯ç”¨å¥—é¤ã€‚

**è¯·æ±‚**

```http
GET /api/plans
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "name": "åŸºç¡€å¥—é¤",
    "description": "é€‚åˆä¸ªäººåˆ›ä½œè€…",
    "features": "[\"100åˆ†é•œ/æœˆ\", \"10GBå­˜å‚¨\"]",
    "price": 9900,
    "duration_days": 30,
    "plan_type": "basic",
    "max_storyboards": 100,
    "storage_gb": 10,
    "is_active": 1,
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

---

### 14.2 åˆ›å»ºå¥—é¤

åˆ›å»ºæ–°å¥—é¤(ä»…ç®¡ç†å‘˜)ã€‚

**è¯·æ±‚**

```http
POST /api/plans
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "name": "ä¸“ä¸šå¥—é¤",
  "description": "é€‚åˆä¸“ä¸šå›¢é˜Ÿ",
  "features": "[\"æ— é™åˆ†é•œ\", \"100GBå­˜å‚¨\", \"ä¼˜å…ˆæ”¯æŒ\"]",
  "price": 29900,
  "duration_days": 30,
  "plan_type": "pro",
  "max_storyboards": null,
  "storage_gb": 100,
  "is_active": 1
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | æ˜¯ | å¥—é¤åç§° |
| description | string | å¦ | å¥—é¤æè¿° |
| features | string | å¦ | åŠŸèƒ½åˆ—è¡¨(JSONå­—ç¬¦ä¸²) |
| price | integer | æ˜¯ | ä»·æ ¼(åˆ†) |
| duration_days | integer | æ˜¯ | æœ‰æ•ˆæœŸ(å¤©) |
| plan_type | string | å¦ | å¥—é¤ç±»å‹: basic/pro/enterprise |
| max_storyboards | integer | å¦ | æ¯æœˆæœ€å¤§åˆ†é•œæ•°,nullè¡¨ç¤ºæ— é™ |
| storage_gb | integer | å¦ | å­˜å‚¨ç©ºé—´(GB),é»˜è®¤10 |
| is_active | integer | å¦ | æ˜¯å¦å¯ç”¨,é»˜è®¤1 |

**å“åº”** (201)

è¿”å›åˆ›å»ºçš„å¥—é¤å¯¹è±¡ã€‚

---

### 14.3 è·å–å¥—é¤è¯¦æƒ…

è·å–å•ä¸ªå¥—é¤ä¿¡æ¯ã€‚

**è¯·æ±‚**

```http
GET /api/plans/{plan_id}
```

**å“åº”** (200)

è¿”å›å®Œæ•´çš„å¥—é¤å¯¹è±¡ã€‚

**é”™è¯¯ç **

- `404`: å¥—é¤ä¸å­˜åœ¨

---

### 14.4 æ›´æ–°å¥—é¤

æ›´æ–°å¥—é¤ä¿¡æ¯(ä»…ç®¡ç†å‘˜)ã€‚

**è¯·æ±‚**

```http
PATCH /api/plans/{plan_id}
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„ã€‚

```json
{
  "name": "æ›´æ–°åçš„å¥—é¤åç§°",
  "price": 19900,
  "is_active": 0
}
```

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„å¥—é¤å¯¹è±¡ã€‚

---

### 14.5 åˆ é™¤å¥—é¤

åˆ é™¤å¥—é¤(ä»…ç®¡ç†å‘˜)ã€‚

**è¯·æ±‚**

```http
DELETE /api/plans/{plan_id}
Authorization: Bearer <token>
```

**å“åº”** (204)

æ— å†…å®¹

---

### 14.6 è®¢é˜…å¥—é¤

ä¸ºç»„ç»‡è®¢é˜…å¥—é¤ã€‚

**è¯·æ±‚**

```http
POST /api/plans/subscribe?plan_id=1
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| plan_id | integer | æ˜¯ | å¥—é¤ID |

**å“åº”** (201)

```json
{
  "id": 1,
  "organization_id": 1,
  "plan_id": 1,
  "status": "active",
  "created_at": "2024-01-01T00:00:00Z"
}
```

**é”™è¯¯ç **

- `404`: å¥—é¤ä¸å­˜åœ¨

---

## 15. æ”¯ä»˜æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/payments`

### 15.1 åˆ›å»ºå¾®ä¿¡æ”¯ä»˜è®¢å•

åˆ›å»ºå¾®ä¿¡Nativeæ”¯ä»˜è®¢å•ã€‚

**è¯·æ±‚**

```http
POST /api/payments/wechat/create
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "plan_type": "basic",
  "amount": 9900
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| plan_type | string | æ˜¯ | å¥—é¤ç±»å‹: basic/pro/enterprise |
| amount | integer | æ˜¯ | é‡‘é¢(åˆ†) |

**å“åº”** (200)

```json
{
  "order_id": "ORDER_ABC123DEF456",
  "qrcode_url": "weixin://wxpay/bizpayurl?pr=xyz123",
  "wechat_request_summary": {
    "url": "https://api.mch.weixin.qq.com/v3/pay/transactions/native",
    "method": "POST",
    "headers": {},
    "body": {},
    "response": {},
    "code_url": "weixin://wxpay/bizpayurl?pr=xyz123"
  }
}
```

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| order_id | string | è®¢å•ID |
| qrcode_url | string | å¾®ä¿¡æ”¯ä»˜äºŒç»´ç URL |
| wechat_request_summary | object | å¾®ä¿¡è¯·æ±‚è¯¦æƒ…(è°ƒè¯•ç”¨) |

**è¯´æ˜**

- ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜v3 API
- æ”¯æŒNativeæ”¯ä»˜æ–¹å¼(æ‰«ç æ”¯ä»˜)
- è®¢å•å·æ ¼å¼: `ORDER_{16ä½éšæœºå­—ç¬¦}`

---

### 15.2 æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€

æŸ¥è¯¢è®¢å•æ”¯ä»˜çŠ¶æ€ã€‚

**è¯·æ±‚**

```http
GET /api/payments/wechat/status/{order_id}
Authorization: Bearer <token>
```

**è·¯å¾„å‚æ•°**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| order_id | string | è®¢å•ID |

**å“åº”** (200)

```json
{
  "order_id": "ORDER_ABC123DEF456",
  "status": "pending"
}
```

**è®¢å•çŠ¶æ€æšä¸¾**

- `pending`: å¾…æ”¯ä»˜
- `paid`: å·²æ”¯ä»˜
- `failed`: æ”¯ä»˜å¤±è´¥
- `expired`: å·²è¿‡æœŸ

**é”™è¯¯ç **

- `403`: æ— æƒè®¿é—®æ­¤è®¢å•
- `404`: è®¢å•ä¸å­˜åœ¨

---

### 15.3 å¾®ä¿¡æ”¯ä»˜å›è°ƒ

æ¥æ”¶å¾®ä¿¡æ”¯ä»˜å›è°ƒé€šçŸ¥(Webhook)ã€‚

**è¯·æ±‚**

```http
POST /api/payments/wechat/callback
Content-Type: application/json
```

**è¯´æ˜**

- è¯¥æ¥å£ç”±å¾®ä¿¡æ”¯ä»˜æœåŠ¡å™¨è°ƒç”¨
- éœ€è¦éªŒè¯å¾®ä¿¡ç­¾å(å½“å‰ä¸ºå ä½å®ç°)
- æ­£å¼ç¯å¢ƒéœ€å®Œæ•´å®ç°ç­¾åéªŒè¯é€»è¾‘

**å“åº”** (200)

```json
{
  "code": "SUCCESS",
  "message": "OK"
}
```

---

## 16. è®¾ç½®æ¨¡å—

è·¯å¾„å‰ç¼€: `/api/settings/api-keys`

æ‰€æœ‰æ¥å£å‡éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚

### 16.1 è·å–APIå¯†é’¥åˆ—è¡¨

è·å–ç»„ç»‡çš„æ‰€æœ‰APIå¯†é’¥ã€‚

**è¯·æ±‚**

```http
GET /api/settings/api-keys
Authorization: Bearer <token>
```

**å“åº”** (200)

```json
[
  {
    "id": 1,
    "name": "Seedream API Key",
    "masked_value": "sk-****xyz",
    "created_at": "2024-01-01T00:00:00Z"
  }
]
```

**è¯´æ˜**

- APIå¯†é’¥åœ¨æ•°æ®åº“ä¸­åŠ å¯†å­˜å‚¨
- è¿”å›æ—¶æ˜¾ç¤ºä¸ºè„±æ•æ ¼å¼

---

### 16.2 åˆ›å»ºAPIå¯†é’¥

åˆ›å»ºæ–°çš„APIå¯†é’¥ã€‚

**è¯·æ±‚**

```http
POST /api/settings/api-keys
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "name": "Seedream API Key",
  "value": "sk-abc123xyz789"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | æ˜¯ | å¯†é’¥åç§° |
| value | string | æ˜¯ | å¯†é’¥å€¼ |

**å“åº”** (201)

```json
{
  "id": 1,
  "name": "Seedream API Key",
  "masked_value": "sk-****xyz",
  "created_at": "2024-01-01T00:00:00Z"
}
```

---

### 16.3 æ›´æ–°APIå¯†é’¥

æ›´æ–°APIå¯†é’¥ã€‚

**è¯·æ±‚**

```http
PATCH /api/settings/api-keys/{key_id}
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "name": "æ–°åç§°",
  "value": "sk-new-value-123"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| name | string | å¦ | å¯†é’¥åç§° |
| value | string | å¦ | å¯†é’¥å€¼ |

**å“åº”** (200)

è¿”å›æ›´æ–°åçš„å¯†é’¥å¯¹è±¡ã€‚

---

### 16.4 åˆ é™¤APIå¯†é’¥

åˆ é™¤APIå¯†é’¥ã€‚

**è¯·æ±‚**

```http
DELETE /api/settings/api-keys/{key_id}
Authorization: Bearer <token>
```

**å“åº”** (204)

æ— å†…å®¹

**é”™è¯¯ç **

- `404`: APIå¯†é’¥ä¸å­˜åœ¨

---

## 17. è¯­éŸ³åˆæˆæ¨¡å—

è·¯å¾„å‰ç¼€: `/api/tts`

### 17.1 è·å–éŸ³è‰²åˆ—è¡¨

è·å–å½“å‰å¯ç”¨çš„éŸ³è‰²é€‰é¡¹,æ”¯æŒå¤šæ¡ä»¶ç­›é€‰ã€‚

**è¯·æ±‚**

```http
GET /api/tts/voices?scene_category=é€šç”¨åœºæ™¯&gender=å¥³
Authorization: Bearer <token>
```

**æŸ¥è¯¢å‚æ•°**

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| scene_category | string | å¦ | åœºæ™¯åˆ†ç±»,ä¾‹å¦‚ `é€šç”¨åœºæ™¯` |
| gender | string | å¦ | æ€§åˆ«ç­›é€‰, `å¥³` æˆ– `ç”·` |
| support_language | string | å¦ | æ”¯æŒè¯­ç§,ä¾‹å¦‚ `ä¸­æ–‡` |
| is_support_mix | integer | å¦ | æ˜¯å¦æ”¯æŒ MIX éŸ³è‰², `0` æˆ– `1` |

**å“åº”** (200)

```json
[
  {
    "name": "zh_female_xiaoxiao",
    "voice_type": "standard",
    "locale": "ä¸­æ–‡",
    "description": "æ ‡å‡†å¥³å£°,é€‚ç”¨äºæ—ç™½",
    "scene_category": "é€šç”¨åœºæ™¯",
    "support_language": "ä¸­æ–‡",
    "gender": "å¥³",
    "is_support_mix": true,
    "core_feature": "æƒ…æ„Ÿä¸°å¯Œ",
    "remarks": null
  }
]
```

**curl ç¤ºä¾‹**

```bash
# è·å–æ‰€æœ‰éŸ³è‰²
curl -X GET "http://localhost:8000/api/tts/voices" \
  -H "Authorization: Bearer <token>"

# ç­›é€‰é€šç”¨åœºæ™¯çš„å¥³å£°
curl -X GET "http://localhost:8000/api/tts/voices?scene_category=é€šç”¨åœºæ™¯&gender=å¥³" \
  -H "Authorization: Bearer <token>"

# ç­›é€‰æ”¯æŒä¸­æ–‡ä¸”æ”¯æŒMIXçš„éŸ³è‰²
curl -X GET "http://localhost:8000/api/tts/voices?support_language=ä¸­æ–‡&is_support_mix=1" \
  -H "Authorization: Bearer <token>"
```

---

### 17.2 æ–‡æœ¬è½¬è¯­éŸ³

ä½¿ç”¨ç«å±±è¯­éŸ³æœåŠ¡å°†æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³ã€‚

**è¯·æ±‚**

```http
POST /api/tts/synthesize
Authorization: Bearer <token>
Content-Type: application/json
```

**è¯·æ±‚ä½“**

```json
{
  "text": "æ¬¢è¿ä½¿ç”¨ AI æ¼«å‰§å¹³å°",
  "voice_type": "zh_female_xiaoxiao",
  "emotion": "happy",
  "speed": 1.0,
  "volume": 1.0,
  "sample_rate": 24000,
  "audio_format": "mp3",
  "wait_for_result": true,
  "download_audio": true
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| text | string | æ˜¯ | å¾…åˆæˆçš„æ–‡æœ¬å†…å®¹ |
| voice_type | string | å¦ | æŒ‡å®šéŸ³è‰²,é»˜è®¤ä½¿ç”¨ç³»ç»Ÿé…ç½® |
| emotion | string | å¦ | æƒ…æ„Ÿæ•ˆæœ,å¦‚ `happy`ã€`sad` |
| speed | float | å¦ | è¯­é€Ÿ,é»˜è®¤ 1.0,èŒƒå›´ 0.5-2.0 |
| volume | float | å¦ | éŸ³é‡,é»˜è®¤ 1.0,èŒƒå›´ 0.0-2.0 |
| sample_rate | integer | å¦ | é‡‡æ ·ç‡,é»˜è®¤ 24000 |
| audio_format | string | å¦ | è¾“å‡ºæ ¼å¼,å¦‚ `mp3` / `wav` |
| wait_for_result | boolean | å¦ | æ˜¯å¦ç­‰å¾…ä»»åŠ¡å®Œæˆåè¿”å›ç»“æœ,é»˜è®¤ true |
| poll_interval | float | å¦ | è½®è¯¢é—´éš”ç§’æ•°,é»˜è®¤ä½¿ç”¨ç³»ç»Ÿé…ç½® |
| timeout | float | å¦ | è¶…æ—¶æ—¶é—´ç§’æ•°,é»˜è®¤ä½¿ç”¨ç³»ç»Ÿé…ç½® |
| download_audio | boolean | å¦ | æ˜¯å¦è¿”å› Base64 éŸ³é¢‘å†…å®¹,é»˜è®¤ false |
| extra_parameters | object | å¦ | é€ä¼ ç»™ TTS æœåŠ¡çš„é¢å¤–å‚æ•° |

**å“åº”** (200)

```json
{
  "task_id": "tts-20240101-abcdef",
  "status": "succeeded",
  "audio_url": "https://oss.example.com/org1/tts/tts-20240101-abcdef.mp3",
  "audio_content_base64": "UklGRjIAAABXQVZFZm10IBAAAAABAAEA..."
}
```

**é”™è¯¯ç **

- `502`: åˆæˆä»»åŠ¡å¤±è´¥æˆ–æœåŠ¡å¼‚å¸¸
- `504`: åˆæˆè¶…æ—¶

**curl ç¤ºä¾‹**

```bash
# åŸºæœ¬æ–‡æœ¬è½¬è¯­éŸ³ï¼ˆä½¿ç”¨é»˜è®¤éŸ³è‰²ï¼‰
curl -X POST "http://localhost:8000/api/tts/synthesize" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "æ¬¢è¿ä½¿ç”¨AIæ¼«å‰§å¹³å°"
  }'

# æŒ‡å®šéŸ³è‰²å’Œæƒ…æ„Ÿ
curl -X POST "http://localhost:8000/api/tts/synthesize" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "ä»Šå¤©å¤©æ°”çœŸå¥½",
    "voice_type": "zh_female_vv_uranus_bigtts",
    "emotion": "happy",
    "speed": 1.2,
    "volume": 1.0
  }'

# å®Œæ•´å‚æ•°ç¤ºä¾‹ï¼ˆåŒ…å«Base64éŸ³é¢‘å†…å®¹ï¼‰
curl -X POST "http://localhost:8000/api/tts/synthesize" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "è¿™æ˜¯ä¸€æ®µæµ‹è¯•è¯­éŸ³",
    "voice_type": "zh_male_dayi_saturn_bigtts",
    "emotion": "neutral",
    "speed": 1.0,
    "volume": 1.0,
    "sample_rate": 24000,
    "audio_format": "mp3",
    "wait_for_result": true,
    "download_audio": true
  }'
```

---

## æ•°æ®æ¨¡å‹

### UserRead

```json
{
  "id": 1,
  "username": "string",
  "display_name": "string",
  "email": "string",
  "phone": "string",
  "role": "string",
  "organization_id": 1,
  "is_active": true,
  "created_at": "2024-01-01T00:00:00Z"
}
```

### ProjectRead

```json
{
  "id": 1,
  "name": "string",
  "project_type": "static_comic|dynamic_comic",
  "status": "draft|progress|completed|failed",
  "description": "string|null",
  "cover_image": "string|null",
  "video_scale": "string|null",
  "video_resolution": "string|null",
  "organization_id": 1,
  "created_at": "2024-01-01T00:00:00Z",
  "chapters": []
}
```

### ChapterRead

```json
{
  "id": 1,
  "name": "string",
  "script_content": "string",
  "order_index": 0,
  "project_id": 1,
  "created_at": "2024-01-01T00:00:00Z",
  "storyboards": []
}
```

### CharacterRead

```json
{
  "id": 1,
  "project_id": 1,
  "display_name": "string",
  "description": "string",
  "portraits": [
    {
      "src": "string",
      "alt": "string"
    }
  ],
  "voice_preset": "string",
  "voice_speed": 1.0,
  "voice_script": "string",
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z"
}
```

### AssetRead

```json
{
  "id": 1,
  "name": "string",
  "description": "string",
  "asset_type": "IMAGE|AUDIO|VIDEO",
  "sub_type": "character_ip|scene|bgm|voice_clone|video_effect|project_config",
  "creation_method": "UPLOAD|GENERATED",
  "tags": [],
  "file_url": "string",
  "object_key": "string",
  "uploaded_by_id": 3,
  "uploaded_by": {
    "id": 3,
    "username": "admin_user",
    "display_name": "é¡¹ç›®ç®¡ç†å‘˜"
  },
  "organization_id": 1,
  "created_at": "2024-01-01T00:00:00Z"
}
```

### TaskRead

```json
{
  "id": 1,
  "task_type": "string",
  "status": "queued|running|completed|failed",
  "payload": {},
  "progress": 0,
  "result": {},
  "error_message": "string",
  "retry_token": "string",
  "created_at": "2024-01-01T00:00:00Z"
}
```

---

## é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£åœ¨å‘ç”Ÿé”™è¯¯æ—¶è¿”å›ç»Ÿä¸€æ ¼å¼:

```json
{
  "detail": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

### HTTPçŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | è¯·æ±‚æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ |
| 204 | åˆ é™¤æˆåŠŸ(æ— å†…å®¹) |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªè®¤è¯æˆ–tokenæ— æ•ˆ |
| 403 | æ— æƒé™è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |
| 502 | å¤–éƒ¨æœåŠ¡é”™è¯¯(å¦‚AIæœåŠ¡) |
| 503 | æœåŠ¡é…ç½®é”™è¯¯(å¦‚OSS/AIæœåŠ¡æœªé…ç½®) |

### å¸¸è§é”™è¯¯ç¤ºä¾‹

**è®¤è¯é”™è¯¯ (401)**

```json
{
  "detail": "Could not validate credentials"
}
```

**æƒé™é”™è¯¯ (403)**

```json
{
  "detail": "éœ€è¦ç®¡ç†å‘˜æƒé™"
}
```

**èµ„æºä¸å­˜åœ¨ (404)**

```json
{
  "detail": "Project not found"
}
```

**å‚æ•°é”™è¯¯ (400)**

```json
{
  "detail": "é‚®ç®±å·²è¢«æ³¨å†Œ"
}
```

**æœåŠ¡é…ç½®é”™è¯¯ (503)**

```json
{
  "detail": "OSSæœªé…ç½®,è¯·è”ç³»ç®¡ç†å‘˜"
}
```

---

## é™„å½•

### é¡¹ç›®ç±»å‹ (ProjectType)

- `static_comic`: é™æ€æ¼«
- `dynamic_comic`: åŠ¨æ€æ¼«

### é¡¹ç›®çŠ¶æ€ (ProjectStatus)

- `draft`: è‰ç¨¿
- `progress`: è¿›è¡Œä¸­
- `completed`: å·²å®Œæˆ
- `failed`: å¤±è´¥

### ç´ æç±»å‹ (AssetType)

- `IMAGE`: å›¾ç‰‡
- `AUDIO`: éŸ³é¢‘
- `VIDEO`: è§†é¢‘

### ç´ æå­ç±»å‹ (AssetSubType)

- `character_ip`: è§’è‰²IP
- `scene`: åœºæ™¯
- `bgm`: èƒŒæ™¯éŸ³ä¹
- `voice_clone`: è¯­éŸ³å…‹éš†
- `video_effect`: è§†é¢‘ç‰¹æ•ˆ
- `project_config`: é¡¹ç›®é…ç½®

### åˆ›å»ºæ–¹å¼ (CreationMethod)

- `UPLOAD`: ä¸Šä¼ 
- `GENERATED`: AIç”Ÿæˆ

### ä»»åŠ¡çŠ¶æ€ (TaskStatus)

- `queued`: æ’é˜Ÿä¸­
- `running`: è¿è¡Œä¸­
- `completed`: å·²å®Œæˆ
- `failed`: å¤±è´¥

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2024-01-01
**APIç‰ˆæœ¬**: v1
